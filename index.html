<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CareerPicker</title>

  <style>
    :root{
      /* More original palette (still premium) */
      --ink:#0b1220;
      --muted:#64748b;
      --bg:#f6f8fc;
      --card:#ffffff;
      --line:rgba(15, 23, 42, .10);

      --brand:#1c3d8f;      /* deep cobalt */
      --brand2:#102a63;     /* midnight */
      --accent:#ffcf33;     /* warm gold */
      --accent2:#ffd95b;

      --shadow: 0 18px 40px rgba(2, 6, 23, .14);
      --softshadow: 0 10px 26px rgba(2, 6, 23, .08);

      --r-xl:26px;
      --r-lg:18px;
      --r-md:14px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:radial-gradient(900px 360px at 18% -8%, rgba(28,61,143,.22), transparent 60%),
                 radial-gradient(900px 380px at 86% -10%, rgba(255,207,51,.18), transparent 55%),
                 var(--bg);
    }

    /* Top */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(246,248,252,.75);
      border-bottom: 1px solid rgba(15,23,42,.08);
      padding:14px 18px;
    }
    .topbarInner{
      max-width:1100px; margin:0 auto;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:1000; letter-spacing:-.2px;
    }
    .logoDot{
      width:12px; height:12px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--brand) 90%);
      box-shadow: 0 8px 18px rgba(28,61,143,.25);
    }
    .brand span{ font-size:18px; }
    .topActions{ display:flex; align-items:center; gap:10px; }
    .chipBtn{
      border:1px solid rgba(15,23,42,.12);
      background:rgba(255,255,255,.75);
      border-radius:999px;
      padding:9px 12px;
      font-weight:900;
      cursor:pointer;
    }
    .chipBtn.primary{
      border-color: transparent;
      background: linear-gradient(180deg, var(--brand) 0%, var(--brand2) 100%);
      color:#fff;
      box-shadow: 0 12px 26px rgba(16,42,99,.22);
    }

    /* Hero */
    .hero{
      padding:28px 18px 10px;
    }
    .wrap{ max-width:1100px; margin:0 auto; }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
      align-items:stretch;
    }
    .heroLeft{
      background: linear-gradient(180deg, rgba(28,61,143,.95) 0%, rgba(16,42,99,.96) 100%);
      border-radius: var(--r-xl);
      padding:26px 22px 22px;
      color:#fff;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroLeft:before{
      content:"";
      position:absolute; inset:-80px -120px auto auto;
      width:260px; height:260px;
      background: radial-gradient(circle at 30% 30%, rgba(255,207,51,.55), transparent 60%);
      transform: rotate(18deg);
      opacity:.85;
    }
    .heroLeft h1{
      margin:0;
      font-size:46px;
      letter-spacing:-.7px;
      line-height:1.02;
      position:relative;
    }
    .heroLeft p{
      margin:10px 0 0;
      font-size:16px;
      line-height:1.4;
      color: rgba(255,255,255,.88);
      max-width:740px;
      position:relative;
    }

    .heroRight{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .miniCard{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(15,23,42,.08);
      border-radius: var(--r-xl);
      padding:16px 16px;
      box-shadow: var(--softshadow);
    }
    .miniTitle{
      font-weight:1000;
      letter-spacing:-.2px;
      margin:0 0 6px;
    }
    .miniText{
      margin:0;
      color:var(--muted);
      font-weight:850;
      line-height:1.35;
      font-size:13px;
    }

    /* Search bar (more original) */
    .searchWrap{
      margin-top:14px;
      border-radius: var(--r-xl);
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: var(--shadow);
      padding:10px;
      position:relative;
    }
    .searchbar{
      display:grid;
      grid-template-columns: 1.7fr .7fr 1fr .45fr;
      gap:10px;
      align-items:stretch;
    }
    .field{
      background:#fff;
      border:1px solid rgba(15,23,42,.10);
      border-radius: var(--r-lg);
      padding:12px 12px;
      min-height:74px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      position:relative;
    }
    .icon{
      width:30px; height:30px;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,207,51,.22);
      border: 1px solid rgba(255,207,51,.45);
      font-weight:1000;
      margin-top:4px;
    }
    .label{
      font-size:13px;
      font-weight:1000;
      color:var(--muted);
      margin-bottom:6px;
    }
    input, select{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      font-size:18px;
      font-weight:950;
      color:var(--ink);
    }
    select{ cursor:pointer; }

    .btn{
      border:none;
      border-radius: var(--r-lg);
      font-size:16px;
      font-weight:1000;
      cursor:pointer;
      background: linear-gradient(180deg, var(--brand) 0%, var(--brand2) 100%);
      color:#fff;
      box-shadow: 0 12px 26px rgba(16,42,99,.22);
    }
    .btn:disabled{ opacity:.6; cursor:not-allowed; box-shadow:none; }

    .metaLine{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding:0 4px;
    }
    .metaPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.75);
      font-weight:950;
      color: rgba(11,18,32,.82);
      font-size:13px;
    }
    .metaPill b{ color: var(--ink); }
    .errorLine{
      display:none;
      margin-top:10px;
      border-radius: 16px;
      padding:10px 12px;
      font-weight:950;
      background: rgba(239, 68, 68, .10);
      border: 1px solid rgba(239, 68, 68, .25);
      color: rgba(153, 27, 27, 1);
    }

    /* Dropdown panel */
    .comboPanel{
      position:absolute;
      left:10px; right:10px;
      top:86px;
      background:#fff;
      border-radius: var(--r-xl);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:none;
      z-index:40;
      color: var(--ink);
    }
    .panelHeader{
      padding:14px 14px 12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      background: linear-gradient(180deg, rgba(28,61,143,.06) 0%, rgba(255,255,255,1) 70%);
    }
    .panelTitle{
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .panelHint{
      font-weight:950;
      color:var(--muted);
      font-size:12px;
    }
    .panelList{
      max-height:380px;
      overflow:auto;
      border-top:1px solid rgba(15,23,42,.08);
      background:#fff;
    }
    .panelItem{
      display:flex;
      gap:12px;
      padding:12px 14px;
      align-items:center;
      border-top:1px solid rgba(15,23,42,.06);
      cursor:pointer;
      background:#fff;
    }
    .panelItem:first-child{ border-top:none; }
    .panelItem:hover{ background:#f4f7ff; }
    .panelItem.active{ background:#eef2ff; }
    .badge{
      width:38px; height:38px;
      border-radius:999px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.08);
      display:flex; align-items:center; justify-content:center;
      font-weight:1000;
      flex:0 0 auto;
    }
    .pTitle{ font-weight:1000; font-size:16px; color:var(--ink); }
    .pSub{ color:var(--muted); font-weight:900; margin-top:2px; font-size:12.5px; }

    /* Results */
    .section{ padding:20px 18px 44px; }
    .resultsHeader{
      display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;
      margin-top:6px;
    }
    .resultsTitle{
      margin:0;
      font-size:30px;
      font-weight:1000;
      letter-spacing:-.4px;
    }
    .resultsSub{
      margin:0;
      color:var(--muted);
      font-weight:900;
      font-size:13px;
    }
    #results{ display:none; margin-top:14px; }

    .resultCard{
      background: rgba(255,255,255,.9);
      border: 1px solid rgba(15,23,42,.08);
      border-radius: var(--r-xl);
      box-shadow: var(--softshadow);
      padding:16px 16px;
      margin:12px 0;
      cursor:pointer;
      transition: transform .08s ease;
    }
    .resultCard:hover{ transform: translateY(-1px); }

    .resultTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .resultName{
      margin:0;
      font-size:22px;
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .match{
      font-weight:1000;
      color: var(--brand);
      font-size:18px;
      white-space:nowrap;
      margin-top:2px;
    }
    .tags{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
    .tag{
      border:1px solid rgba(15,23,42,.10);
      background: rgba(28,61,143,.05);
      border-radius:999px;
      padding:7px 10px;
      font-weight:1000;
      color: rgba(28,61,143,.92);
      font-size:13px;
    }
    .whyLabel{ margin-top:12px; font-weight:1000; }
    ul{
      margin:8px 0 0 18px;
      color: rgba(11,18,32,.74);
      font-weight:900;
      line-height:1.5;
    }

    .moreRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:12px;
    }
    .pillBtn{
      border:1px solid rgba(15,23,42,.12);
      background:#fff;
      padding:8px 10px;
      border-radius:999px;
      font-weight:1000;
      cursor:pointer;
    }
    .hint{ color:var(--muted); font-weight:950; }

    .details{ display:none; margin-top:14px; padding-top:14px; border-top:1px solid rgba(15,23,42,.10); }
    .resultCard.expanded .details{ display:block; }

    .detailsGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px 12px;
      margin-top:10px;
    }
    .detailItem{
      background:#fff;
      border:1px solid rgba(15,23,42,.08);
      border-radius: var(--r-lg);
      padding:12px 12px;
    }
    .detailTitle{ font-weight:1000; margin-bottom:4px; }
    .detailText{ color: rgba(11,18,32,.76); font-weight:900; line-height:1.4; font-size:13.5px; }

    .bottomRow{ display:flex; gap:10px; margin:16px 0 10px; }
    .secondaryBtn{
      background:#fff;
      border:1px solid rgba(15,23,42,.12);
      border-radius: var(--r-lg);
      padding:12px 14px;
      font-weight:1000;
      cursor:pointer;
    }

    /* Modal */
    .modalOverlay{
      position:fixed; inset:0;
      background: rgba(2,6,23,.55);
      display:flex; align-items:center; justify-content:center;
      z-index:9999;
      padding:18px;
    }
    .modal{
      width:min(760px, 100%);
      background:#fff;
      border-radius: var(--r-xl);
      box-shadow: var(--shadow);
      overflow:hidden;
      border:1px solid rgba(15,23,42,.12);
    }
    .modalTop{
      padding:18px 18px 14px;
      background: linear-gradient(180deg, rgba(28,61,143,1) 0%, rgba(16,42,99,1) 100%);
      color:#fff;
    }
    .modalTop h2{ margin:0; font-size:24px; font-weight:1000; letter-spacing:-.2px; }
    .modalTop p{ margin:8px 0 0; opacity:.9; font-weight:900; line-height:1.35; }
    .modalBody{ padding:16px 18px 18px; }
    .choiceGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    .choiceBtn{
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      border-radius: var(--r-xl);
      padding:14px 14px;
      cursor:pointer;
      text-align:left;
      box-shadow: var(--softshadow);
    }
    .choiceBtn:hover{ transform: translateY(-1px); }
    .choiceTitle{ font-weight:1000; font-size:17px; }
    .choiceSub{ margin-top:6px; color:var(--muted); font-weight:900; line-height:1.35; font-size:13px; }
    .finePrint{
      margin-top:12px;
      color:var(--muted);
      font-weight:900;
      font-size:12.8px;
      line-height:1.35;
    }

    @media (max-width: 980px){
      .heroGrid{ grid-template-columns: 1fr; }
      .heroLeft h1{ font-size:40px; }
      .searchbar{ grid-template-columns: 1fr; }
      .comboPanel{ top:82px; }
      .detailsGrid{ grid-template-columns: 1fr; }
      .choiceGrid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="modalOverlay" id="startModal">
    <div class="modal">
      <div class="modalTop">
        <h2>Start: Which score are you using?</h2>
        <p>
          We filter professions using a simple ‚Äúeligibility score‚Äù.
          <br>It‚Äôs not official entry requirements ‚Äî just a smart filter for a prototype.
        </p>
      </div>
      <div class="modalBody">
        <div class="choiceGrid">
          <button class="choiceBtn" id="chooseATAR">
            <div class="choiceTitle">ATAR (0.00‚Äì99.95)</div>
            <div class="choiceSub">ATAR is capped at 99.95 ‚Äî not 100. We'll use it directly.</div>
          </button>
          <button class="choiceBtn" id="chooseGPA7">
            <div class="choiceTitle">GPA (0.00‚Äì7.00)</div>
            <div class="choiceSub">Common in Australian universities (7-point scale). We'll convert it to an eligibility score.</div>
          </button>
        </div>
        <div class="finePrint">
          If you need a 4.0 GPA scale later, tell me and I‚Äôll add a third option (0.00‚Äì4.00).
        </div>
      </div>
    </div>
  </div>

  <div class="topbar">
    <div class="topbarInner">
      <div class="brand">
        <div class="logoDot"></div>
        <span>CareerPicker</span>
      </div>
      <div class="topActions">
        <button class="chipBtn">About</button>
        <button class="chipBtn primary">Save (later)</button>
      </div>
    </div>
  </div>

  <div class="hero">
    <div class="wrap">
      <div class="heroGrid">
        <div class="heroLeft">
          <h1>Pick a real profession, then see related paths.</h1>
          <p id="heroSubtitle">
            Type to search. Scroll to browse. If it‚Äôs not in the list, it won‚Äôt match (real job list only).
          </p>

          <div class="searchWrap">
            <div class="searchbar">
              <div class="field" id="jobField">
                <div class="icon">üíº</div>
                <div style="width:100%">
                  <div class="label">Profession (must pick from list)</div>
                  <input id="jobInput" autocomplete="off" placeholder="Start typing‚Ä¶ (e.g. Electrician, Nurse, Data Analyst)" />
                  <div class="label" style="margin-top:6px" id="jobCountNote"></div>
                </div>

                <div class="comboPanel" id="comboPanel">
                  <div class="panelHeader">
                    <div class="panelTitle">Eligible professions</div>
                    <div class="panelHint">Type to filter ‚Ä¢ Scroll ‚Ä¢ Enter to select</div>
                  </div>
                  <div class="panelList" id="panelList"></div>
                </div>
              </div>

              <div class="field">
                <div class="icon">üßæ</div>
                <div style="width:100%">
                  <div class="label" id="scoreLabel">ATAR</div>
                  <input id="scoreInput" type="number" step="0.05" min="0" max="99.95" value="70" />
                </div>
              </div>

              <div class="field">
                <div class="icon">üí∞</div>
                <div style="width:100%">
                  <div class="label">Salary circumstance (AUD)</div>
                  <select id="salary">
                    <option value="solo" selected>Low: supporting only yourself ‚Äî $45k‚Äì$70k</option>
                    <option value="family">Medium: supporting a family ‚Äî $70k‚Äì$120k</option>
                    <option value="wealth">High: wealth-building / high growth ‚Äî $120k‚Äì$250k+</option>
                  </select>
                </div>
              </div>

              <button class="btn" id="searchBtn" disabled>Get shortlist</button>
            </div>

            <div class="errorLine" id="errorLine">
              Please select a profession from the dropdown list (only eligible professions are shown).
            </div>

            <div class="metaLine">
              <div class="metaPill">
                Mode: <b id="modeText">ATAR</b> ‚Ä¢ Input: <b id="rawScoreText">70</b> ‚Ä¢ Eligibility: <b id="eligScoreText">70</b>/100
              </div>
              <div class="metaPill">
                Tip: raise your score to unlock more professions. Low scores still have options (trades, logistics, hospitality).
              </div>
            </div>
          </div>
        </div>

        <div class="heroRight">
          <div class="miniCard">
            <p class="miniTitle">Real-list matching</p>
            <p class="miniText">You can‚Äôt type a random job and force it ‚Äî it must exist in the list.</p>
          </div>
          <div class="miniCard">
            <p class="miniTitle">Explainable output</p>
            <p class="miniText">Shortlist shows why it fits, plus what you‚Äôd do day-to-day and how to start.</p>
          </div>
          <div class="miniCard">
            <p class="miniTitle">Prototype-safe evidence notes</p>
            <p class="miniText">We label what‚Äôs a ‚Äúrule of thumb‚Äù vs what‚Äôs a formal requirement, so we don‚Äôt pretend certainty.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="wrap">
      <div class="resultsHeader">
        <div>
          <h2 class="resultsTitle">Your shortlist</h2>
          <p class="resultsSub">Click a card to expand details. (Each card is different.)</p>
        </div>
      </div>

      <div id="results"></div>

      <div class="bottomRow">
        <button class="secondaryBtn" id="resetBtn">Reset</button>
      </div>
    </div>
  </div>

<script>
  const $ = (id) => document.getElementById(id);

  // -----------------------
  // Category library (unique details per category)
  // -----------------------
  const CATEGORIES = [
    { id:"hospitality", name:"Hospitality & Retail", tags:["Retail","Cafe","Customer service","Shift lead"],
      detail:{
        env:"Fast-paced, public-facing, shift-based.",
        tools:"POS systems, scheduling apps, inventory tools.",
        tasks:["Serve customers","Handle payments","Stock & setup","Resolve issues quickly"],
        entry:"Very accessible; reliability and attitude matter most.",
        growth:"Supervisor ‚Üí manager ‚Üí (optionally) owner.",
        evidence:"Requirements vary by employer; this is a common hiring pattern, not a guarantee."
      }
    },
    { id:"logistics", name:"Transport & Logistics", tags:["Warehouse","Delivery","Forklift","Scheduling"],
      detail:{
        env:"Warehouses, depots, routes; safety-focused.",
        tools:"Scanners, inventory systems, route/scheduling tools.",
        tasks:["Pick/pack","Dispatch","Operate equipment (ticketed)","Track stock"],
        entry:"Accessible; some roles require licenses/tickets.",
        growth:"Lead hand ‚Üí supervisor ‚Üí planner/supply chain.",
        evidence:"Licensing/tickets depend on role and state; verify locally."
      }
    },
    { id:"trades", name:"Trades & Apprenticeships", tags:["Apprentice","TAFE","On-site","Skilled work"],
      detail:{
        env:"On-site, hands-on work; safety + practical problem-solving.",
        tools:"Trade-specific tools, safety gear, job sheets.",
        tasks:["Install/repair","Read plans","Safety checks","Customer communication"],
        entry:"Often via apprenticeship/TAFE; ATAR usually not the gate.",
        growth:"Qualified ‚Üí specialist ‚Üí run your own business.",
        evidence:"Entry routes differ by trade/employer; this is a typical pathway."
      }
    },
    { id:"business", name:"Business & Management", tags:["Ops","Project","Marketing","Finance"],
      detail:{
        env:"Office/hybrid; meetings + planning + analysis.",
        tools:"Docs, spreadsheets, analytics dashboards, project tools.",
        tasks:["Coordinate work","Analyse metrics","Write plans","Manage stakeholders"],
        entry:"Degrees help; so do projects/internships.",
        growth:"Specialise (BA/PM/Marketing/Finance) ‚Üí leadership.",
        evidence:"Some roles are portfolio-based; requirements vary by company."
      }
    },
    { id:"government", name:"Policy & Government", tags:["Policy","Compliance","Regulation","Public service"],
      detail:{
        env:"Structured orgs; procedures, fairness, accountability.",
        tools:"Brief templates, reporting systems, stakeholder registers.",
        tasks:["Write briefs","Interpret rules","Consult stakeholders","Improve processes"],
        entry:"Communication + writing are big; degrees often preferred.",
        growth:"Policy/program streams ‚Üí senior adviser ‚Üí leadership.",
        evidence:"Public sector criteria vary by agency; check job listings."
      }
    },
    { id:"policing", name:"Justice & Policing", tags:["Police","Corrections","Forensics","Emergency"],
      detail:{
        env:"Field + desk work; high responsibility; teamwork.",
        tools:"Reporting systems, radios, evidence procedures.",
        tasks:["Respond & report","Interview/communicate","De-escalate","Follow protocols"],
        entry:"Fitness/background checks; training pipelines vary.",
        growth:"Specialist units after experience.",
        evidence:"Formal entry standards are state-specific; verify official sites."
      }
    },
    { id:"education", name:"Education", tags:["Teaching","Tutoring","Support","Early childhood"],
      detail:{
        env:"Schools/centres; structured timetable; lots of people time.",
        tools:"Learning platforms, lesson plans, assessments.",
        tasks:["Teach","Plan lessons","Assess progress","Support students"],
        entry:"Qualifications + placements; requirements vary.",
        growth:"Leadership roles (leading teacher, coordinator).",
        evidence:"Registration rules vary by state; confirm local authority."
      }
    },
    { id:"health", name:"Healthcare", tags:["Nursing","Allied health","Medicine","Care"],
      detail:{
        env:"Clinics/hospitals; teamwork; documentation-heavy.",
        tools:"Clinical systems, patient notes, protocols.",
        tasks:["Assess & support","Communicate","Follow procedures","Work placements"],
        entry:"Competitive for some professions (medicine/dentistry).",
        growth:"Specialise via further training/experience.",
        evidence:"This app uses rule-of-thumb cutoffs; not official admissions thresholds."
      }
    },
    { id:"tech", name:"Technology & Software", tags:["Software","Cyber","Data","Cloud"],
      detail:{
        env:"Teams; project work; constant learning; often hybrid.",
        tools:"Git, IDEs, cloud consoles, tickets, monitoring.",
        tasks:["Build features","Debug","Review code","Automate & improve"],
        entry:"Portfolio can matter a lot; some roles still prefer degrees.",
        growth:"Specialise (cloud/data/security) ‚Üí senior/lead.",
        evidence:"Hiring depends on portfolio + interviews; not purely score-based."
      }
    },
    { id:"engineering", name:"Engineering", tags:["Civil","Electrical","Mechanical","Design"],
      detail:{
        env:"Design + field checks; safety and standards matter.",
        tools:"CAD, modelling, documentation, testing rigs.",
        tasks:["Design","Model & test","Document","Coordinate with teams"],
        entry:"Often needs strong maths/science prerequisites.",
        growth:"Grad ‚Üí professional engineer ‚Üí chartered/specialist.",
        evidence:"University prerequisites vary; verify course pages."
      }
    },
    { id:"law", name:"Law", tags:["Lawyer","Paralegal","Contracts","Corporate"],
      detail:{
        env:"Reading + writing heavy; accuracy and ethics.",
        tools:"Document systems, legal databases, templates.",
        tasks:["Draft documents","Research","Advise","Negotiate"],
        entry:"Often university-based and competitive.",
        growth:"Specialise (corporate/criminal/family) ‚Üí senior roles.",
        evidence:"Cutoffs vary by university; confirm official admissions data."
      }
    },
    { id:"creative", name:"Creative & Media", tags:["UI/UX","Design","Video","Content"],
      detail:{
        env:"Studio/remote; feedback loops; portfolio-driven.",
        tools:"Figma/Adobe, editors, content tools.",
        tasks:["Design iterations","Produce content","Gather feedback","Ship improvements"],
        entry:"Portfolio often outweighs scores.",
        growth:"Specialise (UX/video/brand) ‚Üí lead/agency/freelance.",
        evidence:"Entry depends on portfolio quality; this is a common industry pattern."
      }
    },
  ];

  const RELATED = {
    law:        ["government","business","policing"],
    policing:   ["government","law","health"],
    government: ["law","business","tech"],
    tech:       ["engineering","business","creative"],
    health:     ["policing","education","government"],
    business:   ["government","tech","law"],
    creative:   ["tech","business","education"],
    engineering:["tech","business","government"],
    education:  ["health","government","creative"],

    trades:     ["logistics","business","engineering"],
    hospitality:["business","logistics","creative"],
    logistics:  ["business","trades","government"]
  };

  // Category minimums are in *eligibility score* (0‚Äì100)
  const CATEGORY_MIN = {
    hospitality: 0,
    logistics: 10,
    trades: 20,
    creative: 40,
    tech: 45,
    business: 50,
    policing: 55,
    government: 60,
    education: 60,
    health: 70,
    engineering: 75,
    law: 80
  };

  const JOB_MIN_OVERRIDE = {
    "Doctor": 95,
    "Surgeon": 98,
    "General Practitioner": 95,
    "Dentist": 92,
    "Psychologist": 85,
    "Pharmacist": 85,
    "Paramedic": 78,
    "Midwife": 78,

    "Lawyer": 85,
    "Barrister": 90,

    "AI Engineer": 75,
    "Machine Learning Engineer": 78,
    "Data Scientist": 75,
    "Solutions Architect": 70,

    "Civil Engineer": 78,
    "Electrical Engineer": 80,
    "Mechanical Engineer": 78,

    "Teacher (Secondary)": 70,
    "Teacher (Primary)": 65
  };

  function getCategory(id){ return CATEGORIES.find(c => c.id === id); }
  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }
  function categoryIcon(cat){
    const map = {
      law:"‚öñÔ∏è", policing:"üöì", government:"üèõÔ∏è", tech:"üíª",
      engineering:"üõ†Ô∏è", health:"ü©∫", business:"üìà", creative:"üé®", education:"üìö",
      trades:"üß∞", hospitality:"üõçÔ∏è", logistics:"üöö"
    };
    return map[cat] || "üíº";
  }

  // -----------------------
  // Massive jobs list generator (~450+)
  // -----------------------
  function uniqueJobs(list){
    const seen = new Set();
    const out = [];
    for (const j of list){
      const key = j.title.toLowerCase();
      if (seen.has(key)) continue;
      seen.add(key);
      out.push(j);
    }
    return out;
  }

  function generateJobs(){
    const out = [];
    const add = (title, category, sub) => out.push({ title, category, sub });
    const addMany = (arr, cat, sub) => arr.forEach(t => add(t, cat, sub));
    const addLevels = (levels, roles, cat, sub) => levels.forEach(l => roles.forEach(r => add(`${l} ${r}`, cat, sub)));

    addMany([
      "Retail Assistant","Retail Sales Associate","Cashier","Store Team Member","Customer Service Assistant",
      "Call Centre Agent","Receptionist (Entry)","Barista","Cafe All-rounder","Waiter","Kitchen Hand",
      "Fast Food Team Member","Housekeeper","Cleaner","Event Staff","Stock Replenisher","Merchandiser",
      "Shift Supervisor (Retail)","Assistant Store Manager","Store Manager","Restaurant Manager"
    ], "hospitality", "Entry-friendly ‚Ä¢ customer service ‚Ä¢ teamwork");

    addMany([
      "Warehouse Assistant","Picker Packer","Storeperson","Forklift Operator","Dispatch Coordinator",
      "Delivery Driver","Courier Driver","Inventory Controller","Logistics Coordinator","Transport Scheduler",
      "Route Planner","Freight Handler"
    ], "logistics", "Demand ‚Ä¢ safety ‚Ä¢ reliability");

    addMany([
      "Apprentice Electrician","Apprentice Plumber","Apprentice Carpenter","Apprentice Painter","Apprentice Mechanic",
      "Electrician","Plumber","Carpenter","Painter","Tiler","Welder","Mechanic","Diesel Mechanic","Auto Electrician",
      "HVAC Technician","Solar Installer","Locksmith","Landscaper"
    ], "trades", "Hands-on ‚Ä¢ apprenticeship/TAFE");

    addMany([
      "Software Engineer","Frontend Developer","Backend Developer","Full Stack Developer","Mobile App Developer",
      "QA Engineer","Test Automation Engineer","DevOps Engineer","Cloud Engineer","Network Engineer",
      "IT Support Officer","Helpdesk Technician","Cybersecurity Analyst","Security Engineer",
      "Data Analyst","Data Engineer","Data Scientist","Machine Learning Engineer","AI Engineer","Solutions Architect"
    ], "tech", "Build ‚Ä¢ debug ‚Ä¢ ship");

    addLevels(["Junior","Mid","Senior","Lead"], ["Software Engineer","Data Analyst","Cloud Engineer","Security Engineer"], "tech", "Progression ‚Ä¢ portfolio");

    addMany([
      "Business Analyst","Project Manager","Product Manager","Operations Coordinator","Digital Marketer",
      "Accountant","Bookkeeper","Financial Analyst","Sales Representative","Account Manager",
      "HR Officer","Recruiter","Procurement Officer","Office Manager","Administrative Assistant"
    ], "business", "Planning ‚Ä¢ people ‚Ä¢ outcomes");

    addMany([
      "Policy Officer","Policy Analyst","Program Officer","Compliance Officer (Government)",
      "Community Engagement Officer","Inspector (Regulatory)","Urban Planner"
    ], "government", "Systems ‚Ä¢ briefs ‚Ä¢ stakeholders");

    addMany([
      "Police Officer","Detective","Corrections Officer","Security Officer",
      "Crime Scene Investigator","Forensic Analyst","Emergency Dispatcher","Firefighter","Paramedic"
    ], "policing", "Public service ‚Ä¢ protocols");

    addMany([
      "Teacher (Primary)","Teacher (Secondary)","Early Childhood Educator","Teacher Aide","Tutor",
      "Special Education Teacher","School Counsellor"
    ], "education", "Teaching ‚Ä¢ support ‚Ä¢ structure");

    addMany([
      "Nurse","Registered Nurse","Enrolled Nurse","Doctor","General Practitioner","Surgeon",
      "Psychologist","Physiotherapist","Occupational Therapist","Pharmacist","Dentist","Radiographer","Dietitian","Midwife"
    ], "health", "Care ‚Ä¢ science ‚Ä¢ teamwork");

    addMany([
      "Civil Engineer","Structural Engineer","Mechanical Engineer","Electrical Engineer",
      "Environmental Engineer","Surveyor","CAD Technician"
    ], "engineering", "Design ‚Ä¢ test ‚Ä¢ safety");

    addMany([
      "Lawyer","Solicitor","Barrister","Paralegal","Legal Assistant","Contracts Manager","Mediator"
    ], "law", "Rules ‚Ä¢ writing ‚Ä¢ evidence");

    addMany([
      "UI/UX Designer","Graphic Designer","Video Editor","Content Creator","Motion Designer","Photographer"
    ], "creative", "Portfolio ‚Ä¢ iteration ‚Ä¢ storytelling");

    // add more role variants to reach ~450+
    const adminRoles = ["Administrator","Coordinator","Officer","Assistant","Associate"];
    const domains = [
      {cat:"business", d:"Operations"},
      {cat:"business", d:"Sales"},
      {cat:"business", d:"Marketing"},
      {cat:"government", d:"Compliance"},
      {cat:"logistics", d:"Transport"},
      {cat:"hospitality", d:"Customer Service"},
      {cat:"tech", d:"IT Support"}
    ];
    domains.forEach(x => adminRoles.forEach(r => add(`${x.d} ${r}`, x.cat, "Common role ‚Ä¢ transferable skills")));

    // language dev variants
    ["Python","Java","JavaScript","TypeScript","C#","Go"].forEach(lang => add(`${lang} Developer`, "tech", "Programming ‚Ä¢ features"));

    // trade variants
    addLevels(["Apprentice","Qualified"], ["Electrician","Plumber","Carpenter","Mechanic","Welder","HVAC Technician"], "trades", "Trade pathway");

    // fill more ‚Äúreal‚Äù variants
    addLevels(["Junior","Senior"], ["Warehouse Assistant","Logistics Coordinator","Inventory Controller","Delivery Driver"], "logistics", "Demand ‚Ä¢ schedules");
    addLevels(["Junior","Senior"], ["Barista","Waiter","Customer Service Assistant","Receptionist"], "hospitality", "Entry-friendly");

    return uniqueJobs(out).sort((a,b)=>a.title.localeCompare(b.title));
  }

  const JOBS_ALL = generateJobs();

  // -----------------------
  // Mode & score conversion
  // -----------------------
  let mode = null;          // "ATAR" or "GPA7"
  let selectedJob = null;
  let filteredJobs = [];
  let activeIndex = -1;

  function clamp(n, min, max){ return Math.min(max, Math.max(min, n)); }

  function getRawScore(){
    const v = Number($("scoreInput").value);
    if (Number.isNaN(v)) return 0;
    return v;
  }

  function rawToEligibility(raw){
    if (mode === "ATAR"){
      // ATAR: 0.00‚Äì99.95 mapped to 0‚Äì100
      const r = clamp(raw, 0, 99.95);
      return Math.round((r / 99.95) * 100);
    }
    if (mode === "GPA7"){
      // GPA: 0.00‚Äì7.00 mapped to 0‚Äì100
      const r = clamp(raw, 0, 7);
      return Math.round((r / 7) * 100);
    }
    return 0;
  }

  function updateScoreUI(){
    const raw = getRawScore();
    const elig = rawToEligibility(raw);
    $("rawScoreText").textContent = (mode === "ATAR") ? raw.toFixed(2) : raw.toFixed(2);
    $("eligScoreText").textContent = String(elig);
    return elig;
  }

  function setMode(newMode){
    mode = newMode;
    $("startModal").style.display = "none";

    if (mode === "ATAR"){
      $("scoreLabel").textContent = "ATAR (0.00‚Äì99.95)";
      $("modeText").textContent = "ATAR";
      $("scoreInput").min = "0";
      $("scoreInput").max = "99.95";
      $("scoreInput").step = "0.05";
      $("scoreInput").value = "70.00";
    } else {
      $("scoreLabel").textContent = "GPA (0.00‚Äì7.00)";
      $("modeText").textContent = "GPA";
      $("scoreInput").min = "0";
      $("scoreInput").max = "7";
      $("scoreInput").step = "0.01";
      $("scoreInput").value = "5.00";
    }

    updateScoreUI();
    refreshPanel();
  }

  $("chooseATAR").addEventListener("click", () => setMode("ATAR"));
  $("chooseGPA7").addEventListener("click", () => setMode("GPA7"));

  // -----------------------
  // Eligibility checks
  // -----------------------
  function minScoreForJob(jobTitle, catId){
    if (JOB_MIN_OVERRIDE[jobTitle] != null) return JOB_MIN_OVERRIDE[jobTitle];
    return CATEGORY_MIN[catId] ?? 40;
  }

  function isEligible(job, eligScore){
    return eligScore >= minScoreForJob(job.title, job.category);
  }

  // -----------------------
  // Dropdown panel logic
  // -----------------------
  function showPanel(){ $("comboPanel").style.display = "block"; }
  function hidePanel(){ $("comboPanel").style.display = "none"; activeIndex=-1; renderPanelList(); }
  function setError(on){ $("errorLine").style.display = on ? "block" : "none"; }

  function buildEligibleJobs(){
    const elig = updateScoreUI();
    const eligible = JOBS_ALL.filter(j => isEligible(j, elig));
    if (!eligible.length){
      return JOBS_ALL.filter(j => ["hospitality","logistics","trades"].includes(j.category)).slice(0, 250);
    }
    return eligible;
  }

  function filterJobs(query){
    const q = (query || "").trim().toLowerCase();
    const eligible = buildEligibleJobs();
    if (!q) return eligible.slice(0, 320);
    return eligible
      .filter(j => j.title.toLowerCase().includes(q) || (j.sub||"").toLowerCase().includes(q))
      .slice(0, 320);
  }

  function validateExactJobEligible(){
    const val = $("jobInput").value.trim().toLowerCase();
    if (!val) return null;
    return filteredJobs.find(j => j.title.toLowerCase() === val) || null;
  }

  function setSelected(job){
    selectedJob = job;
    $("jobInput").value = job.title;
    $("searchBtn").disabled = false;
    setError(false);
    hidePanel();
  }

  function renderPanelList(){
    const list = $("panelList");
    list.innerHTML = "";
    const items = filteredJobs;

    const eligibleCount = buildEligibleJobs().length;
    $("jobCountNote").textContent = items.length
      ? `${items.length} shown ‚Ä¢ ${eligibleCount} eligible in total`
      : `0 shown ‚Ä¢ ${eligibleCount} eligible in total`;

    if (!items.length){
      const empty = document.createElement("div");
      empty.className = "panelItem";
      empty.style.cursor = "default";
      empty.innerHTML = `
        <div class="badge">‚ùå</div>
        <div>
          <div class="pTitle">No eligible match</div>
          <div class="pSub">Try another term or increase your score.</div>
        </div>
      `;
      list.appendChild(empty);
      return;
    }

    items.forEach((job, idx) => {
      const div = document.createElement("div");
      div.className = "panelItem" + (idx === activeIndex ? " active" : "");
      const minReq = minScoreForJob(job.title, job.category);
      const catName = getCategory(job.category)?.name || "Career";
      div.innerHTML = `
        <div class="badge">${categoryIcon(job.category)}</div>
        <div style="min-width:0">
          <div class="pTitle">${escapeHtml(job.title)}</div>
          <div class="pSub">${escapeHtml(catName)} ‚Ä¢ min eligibility: ${minReq}/100</div>
        </div>
      `;
      div.addEventListener("mousedown", (e) => {
        e.preventDefault();
        setSelected(job);
      });
      list.appendChild(div);
    });
  }

  function ensureActiveVisible(){
    const list = $("panelList");
    const item = list.children[activeIndex];
    if (!item) return;
    const itemTop = item.offsetTop;
    const itemBottom = itemTop + item.offsetHeight;
    const viewTop = list.scrollTop;
    const viewBottom = viewTop + list.clientHeight;
    if (itemTop < viewTop) list.scrollTop = itemTop;
    else if (itemBottom > viewBottom) list.scrollTop = itemBottom - list.clientHeight;
  }

  function refreshPanel(){
    filteredJobs = filterJobs($("jobInput").value);
    renderPanelList();
  }

  // -----------------------
  // Shortlist scoring (less repetitive)
  // -----------------------
  function salaryBias(salaryKey, catId){
    if (salaryKey === "wealth"){
      if (["tech","engineering","law","business","trades"].includes(catId)) return 10;
      return 4;
    }
    if (salaryKey === "solo"){
      if (["hospitality","logistics","trades","government","policing"].includes(catId)) return 7;
      return 3;
    }
    // family
    if (["business","government","tech","trades","health","education"].includes(catId)) return 7;
    return 3;
  }

  function scoreCategory(catId, eligScore, salaryKey, primaryCat){
    let s = 0;
    s += (catId === primaryCat) ? 110 : 62;
    s += salaryBias(salaryKey, catId);

    // Gentle boost if eligScore is strong and category is competitive
    const competitive = ["law","health","engineering"];
    if (competitive.includes(catId)){
      s += (eligScore >= 90 ? 18 : eligScore >= 80 ? 12 : eligScore >= 70 ? 6 : 2);
    } else {
      s += (eligScore >= 80 ? 10 : eligScore >= 70 ? 7 : 4);
    }
    return s;
  }

  function toPercent(rankIndex, topScore, score){
    const raw = Math.max(0, Math.min(100, Math.round((score / topScore) * 100)));
    if (rankIndex === 0) return Math.max(raw, 76);
    if (rankIndex === 1) return Math.min(Math.max(raw, 64), 92);
    if (rankIndex === 2) return Math.min(Math.max(raw, 56), 88);
    return Math.min(Math.max(raw, 50), 82);
  }

  function sampleJobsForCategory(catId, excludeTitle){
    const elig = updateScoreUI();
    const eligible = JOBS_ALL.filter(j => j.category === catId && j.title !== excludeTitle && isEligible(j, elig));
    return eligible.slice(0, 10).map(j => j.title);
  }

  function buildWhyBullets(catId, primaryJob, eligScore, salaryKey){
    const cat = getCategory(catId);
    const bullets = [];

    // Unique ‚Äúfit signal‚Äù bullets (not repeated across cards)
    bullets.push(`Chosen profession: ${primaryJob.title}. This category stays close to that path.`);
    if (catId === primaryJob.category){
      bullets.push("Same category match: we keep the shortlist near your selected profession (strict mode).");
    } else {
      bullets.push("Related category match: this is a neighboring path (skills transfer well).");
    }

    // Salary framing, different wording
    if (salaryKey === "solo") bullets.push("Salary circumstance: solo support ‚Üí prioritises accessible entry + stable progression.");
    if (salaryKey === "family") bullets.push("Salary circumstance: family support ‚Üí prioritises steady growth and predictable pathways.");
    if (salaryKey === "wealth") bullets.push("Salary circumstance: wealth-building ‚Üí prioritises higher ceiling paths (with effort/time).");

    // Score framing
    bullets.push(`Eligibility score: ${eligScore}/100 ‚Üí affects what roles are unlocked in the dropdown.`);

    // Category-specific extra bullet
    const extra = {
      hospitality:"Best for fast hiring + confidence building + customer communication.",
      logistics:"Best for stable demand + clear tickets/licenses + progression into coordination.",
      trades:"Best for earn-while-you-learn pathways + strong long-term income with experience.",
      business:"Best for people + planning + improving systems; internships matter.",
      government:"Best for writing/structure/fairness; roles are process-heavy.",
      policing:"Best for public service + protocol-based work; entry is state-specific.",
      education:"Best for explaining and coaching; requires placements/registration.",
      health:"Best for care + science; some pathways are highly competitive.",
      tech:"Best for building and problem-solving; portfolio can matter a lot.",
      engineering:"Best for maths/physics + safety; prerequisites vary by uni.",
      law:"Best for reading/writing + rules; uni entry is competitive.",
      creative:"Best for portfolio-driven careers; practice and feedback loops win."
    }[catId] || "Good fit based on your inputs.";
    bullets.push(extra);

    return bullets;
  }

  function renderResults(sorted, primaryJob, eligScore, salaryKey){
    const results = $("results");
    results.style.display = "block";
    results.innerHTML = "";

    const topScore = sorted[0]?.score || 1;

    sorted.forEach((item, idx) => {
      const cat = getCategory(item.catId);
      const pct = toPercent(idx, topScore, item.score);
      const suggested = sampleJobsForCategory(item.catId, primaryJob.title).slice(0, 10);
      const whyBullets = buildWhyBullets(item.catId, primaryJob, eligScore, salaryKey);

      const d = cat.detail;

      const card = document.createElement("div");
      card.className = "resultCard";
      card.innerHTML = `
        <div class="resultTop">
          <div>
            <h3 class="resultName">${idx+1}. ${escapeHtml(cat.name)}</h3>
            <div class="tags">
              ${cat.tags.map(t => `<span class="tag">${escapeHtml(t)}</span>`).join("")}
            </div>
          </div>
          <div class="match">${pct}% match</div>
        </div>

        <div class="whyLabel">Why it fits:</div>
        <ul>
          ${whyBullets.map(x => `<li>${escapeHtml(x)}</li>`).join("")}
        </ul>

        <div class="moreRow">
          <span class="hint">Click to expand details</span>
          <button class="pillBtn" data-toggle-details>More details</button>
        </div>

        <div class="details">
          <div class="detailsGrid">
            <div class="detailItem">
              <div class="detailTitle">Typical environment</div>
              <div class="detailText">${escapeHtml(d.env)}</div>
            </div>
            <div class="detailItem">
              <div class="detailTitle">Typical tools</div>
              <div class="detailText">${escapeHtml(d.tools)}</div>
            </div>
            <div class="detailItem">
              <div class="detailTitle">Typical tasks</div>
              <div class="detailText">${d.tasks.map(t => "‚Ä¢ " + escapeHtml(t)).join("<br/>")}</div>
            </div>
            <div class="detailItem">
              <div class="detailTitle">Entry & pathway</div>
              <div class="detailText">${escapeHtml(d.entry)}<br/><br/><b>Growth:</b> ${escapeHtml(d.growth)}</div>
            </div>

            <div class="detailItem" style="grid-column:1/-1;">
              <div class="detailTitle">Evidence note (prototype honesty)</div>
              <div class="detailText">${escapeHtml(d.evidence)}</div>
            </div>

            <div class="detailItem" style="grid-column:1/-1;">
              <div class="detailTitle">Eligible professions you can select right now</div>
              <div class="detailText">
                ${suggested.length ? suggested.map(x => `‚Ä¢ ${escapeHtml(x)}`).join("<br/>") : "No eligible suggestions at your current score."}
              </div>
            </div>
          </div>
        </div>
      `;
      results.appendChild(card);
    });

    results.scrollIntoView({ behavior:"smooth", block:"start" });
  }

  function runSearch(){
    const exact = validateExactJobEligible();
    if (!exact){
      $("searchBtn").disabled = true;
      setError(true);
      $("results").style.display = "none";
      return;
    }

    selectedJob = exact;
    $("searchBtn").disabled = false;
    setError(false);

    const salaryKey = $("salary").value;
    const eligScore = updateScoreUI();
    const primaryCat = selectedJob.category;

    const catIds = [primaryCat, ...(RELATED[primaryCat] || [])].slice(0, 4);
    const uniqueCatIds = Array.from(new Set(catIds));

    const scored = uniqueCatIds.map(id => ({
      catId: id,
      score: scoreCategory(id, eligScore, salaryKey, primaryCat)
    })).sort((a,b)=>b.score-a.score);

    renderResults(scored, selectedJob, eligScore, salaryKey);
  }

  // -----------------------
  // Events
  // -----------------------
  $("jobInput").addEventListener("focus", () => { refreshPanel(); showPanel(); });

  $("jobInput").addEventListener("input", () => {
    const exact = validateExactJobEligible();
    if (exact){
      selectedJob = exact;
      $("searchBtn").disabled = false;
      setError(false);
    } else {
      selectedJob = null;
      $("searchBtn").disabled = true;
    }
    refreshPanel();
    showPanel();
  });

  $("jobInput").addEventListener("keydown", (e) => {
    if ($("comboPanel").style.display !== "block") return;
    if (e.key === "ArrowDown"){
      e.preventDefault();
      if (!filteredJobs.length) return;
      activeIndex = Math.min(filteredJobs.length - 1, activeIndex + 1);
      renderPanelList(); ensureActiveVisible();
    } else if (e.key === "ArrowUp"){
      e.preventDefault();
      if (!filteredJobs.length) return;
      activeIndex = Math.max(0, activeIndex - 1);
      renderPanelList(); ensureActiveVisible();
    } else if (e.key === "Enter"){
      const pick = filteredJobs[activeIndex];
      if (pick){
        e.preventDefault();
        setSelected(pick);
      } else {
        const exact = validateExactJobEligible();
        if (exact){ e.preventDefault(); setSelected(exact); }
      }
    } else if (e.key === "Escape"){
      hidePanel();
    }
  });

  document.addEventListener("mousedown", (e) => {
    const field = $("jobField");
    if (!field.contains(e.target)) hidePanel();
  });

  $("scoreInput").addEventListener("input", () => {
    updateScoreUI();
    refreshPanel();
    const exact = validateExactJobEligible();
    $("searchBtn").disabled = !exact;
  });

  $("salary").addEventListener("change", () => {
    // no auto-run; just changes scoring when you press shortlist
  });

  $("searchBtn").addEventListener("click", runSearch);

  $("resetBtn").addEventListener("click", () => {
    $("jobInput").value = "";
    selectedJob = null;
    $("searchBtn").disabled = true;
    setError(false);
    $("results").style.display = "none";
    $("results").innerHTML = "";
    if (mode === "ATAR") $("scoreInput").value = "70.00";
    if (mode === "GPA7") $("scoreInput").value = "5.00";
    updateScoreUI();
    refreshPanel();
    window.scrollTo({ top: 0, behavior:"smooth" });
  });

  document.addEventListener("click", (e) => {
    const toggleBtn = e.target.closest("[data-toggle-details]");
    if (toggleBtn){
      e.preventDefault();
      const card = toggleBtn.closest(".resultCard");
      if (card) card.classList.toggle("expanded");
      return;
    }
    const card = e.target.closest(".resultCard");
    if (!card) return;
    if (e.target.closest("a, button, input, select, textarea")) return;
    card.classList.toggle("expanded");
  });

  // Init (modal shows first)
  updateScoreUI();
  filteredJobs = [];
  renderPanelList();
</script>
</body>
</html>

