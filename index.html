<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CareerPicker</title>
  <style>
    :root{
      --ink:#0b1220;
      --muted:#5b6b86;
      --bg:#f7f8ff;

      --card:#ffffff;
      --line:rgba(15, 23, 42, .10);

      --brand:#5b2cff;     /* electric violet */
      --brand2:#1a6bff;    /* vivid blue */
      --accent:#ff4fd8;    /* neon pink */
      --accent2:#25f4c9;   /* mint */

      --shadow: 0 24px 60px rgba(2, 6, 23, .18);
      --softshadow: 0 12px 28px rgba(2, 6, 23, .10);

      --r-xl:28px;
      --r-lg:18px;
      --r-md:14px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:
        radial-gradient(900px 420px at 14% 2%, rgba(91,44,255,.25), transparent 60%),
        radial-gradient(720px 360px at 86% 4%, rgba(255,79,216,.18), transparent 58%),
        radial-gradient(720px 380px at 66% 92%, rgba(37,244,201,.12), transparent 55%),
        var(--bg);
    }

    a{ color:inherit; text-decoration:none; }

    .topbar{
      position:sticky; top:0; z-index:50;
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(15,23,42,.06);
    }
    .topbarInner{
      max-width:1200px; margin:0 auto;
      padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:1000;
      letter-spacing:-.3px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 4px rgba(255,79,216,.12);
    }
    .topActions{ display:flex; gap:10px; align-items:center; }
    .pillBtn{
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      border-radius:999px;
      padding:10px 14px;
      font-weight:950;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(2,6,23,.06);
    }
    .pillBtn.primary{
      border:none;
      background: linear-gradient(135deg, var(--brand) 0%, var(--brand2) 70%, var(--accent) 130%);
      color:#fff;
      box-shadow: 0 14px 26px rgba(91,44,255,.22);
    }

    .wrap{ max-width:1200px; margin:0 auto; padding:0 18px; }

    /* HERO */
    .hero{ padding:30px 0 12px; }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.3fr .7fr;
      gap:18px;
      align-items:stretch;
    }
    .heroLeft{
      border-radius: var(--r-xl);
      padding:30px 26px 24px;
      color:#fff;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;

      background:
        radial-gradient(600px 260px at 18% 12%, rgba(255,79,216,.35), transparent 60%),
        radial-gradient(700px 320px at 86% 18%, rgba(37,244,201,.22), transparent 55%),
        linear-gradient(135deg, rgba(91,44,255,1) 0%, rgba(26,107,255,1) 60%, rgba(11,18,32,1) 125%);
    }
    .heroLeft:before{
      content:"";
      position:absolute; inset:-120px -180px auto auto;
      width:380px; height:380px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.20), transparent 60%);
      transform: rotate(18deg);
      opacity:.85;
    }
    .heroLeft h1{
      margin:0;
      font-size:54px;
      letter-spacing:-1px;
      line-height:1.02;
      position:relative;
    }
    .heroLeft p{
      margin:12px 0 0;
      font-size:16px;
      line-height:1.55;
      color: rgba(255,255,255,.88);
      max-width:780px;
      position:relative;
    }

    .heroRight{ display:flex; flex-direction:column; gap:14px; }
    .miniCard{
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(15,23,42,.08);
      border-radius: var(--r-xl);
      padding:18px 18px;
      box-shadow: var(--softshadow);
    }
    .miniTitle{ font-weight:1000; letter-spacing:-.2px; margin:0 0 8px; }
    .miniText{
      margin:0;
      color:var(--muted);
      font-weight:850;
      line-height:1.55;
      font-size:13.5px;
      letter-spacing:.1px;
    }

    .searchWrap{
      margin-top:18px;
      border-radius: var(--r-xl);
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 26px 70px rgba(2,6,23,.20);
      padding:14px;
      position:relative;
    }

    .searchbar{
      display:grid;
      grid-template-columns: 1.9fr .9fr 1.2fr .55fr;
      gap:12px;
      align-items:stretch;
    }

    .field{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,23,42,.10);
      border-radius: var(--r-lg);
      padding:14px 14px;
      min-height:92px;
      display:flex;
      gap:12px;
      align-items:flex-start;
      position:relative;
    }

    .icon{
      width:34px; height:34px;
      border-radius:14px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,79,216,.16);
      border: 1px solid rgba(255,79,216,.35);
      font-weight:1000;
      margin-top:5px;
      flex: 0 0 auto;
    }

    .label{
      font-size:13px;
      font-weight:1000;
      color: rgba(15,23,42,.72);
      margin-bottom:8px;
    }

    input, select{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      font-size:18px;
      font-weight:950;
      color:var(--ink);
      line-height:1.3;
    }

    .btn{
      border:none;
      border-radius: var(--r-lg);
      font-size:16px;
      font-weight:1000;
      cursor:pointer;
      background: linear-gradient(135deg, var(--accent) 0%, var(--brand) 55%, var(--brand2) 100%);
      color:#fff;
      box-shadow: 0 18px 36px rgba(91,44,255,.28);
      min-height:92px;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; transform:none; }

    .metaLine{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding:2px 2px;
    }
    .metaPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.14);
      font-weight:950;
      color: rgba(255,255,255,.92);
      font-size:13px;
      white-space:nowrap;
    }
    .metaPill b{ color:#fff; }

    .errorLine{
      display:none;
      margin-top:12px;
      border-radius: 16px;
      padding:12px 12px;
      font-weight:950;
      background: rgba(255, 79, 216, .14);
      border: 1px solid rgba(255, 79, 216, .28);
      color: rgba(255,255,255,.92);
    }

    /* Dropdown */
    .comboPanel{
      position:absolute;
      left:14px; right:14px;
      top:108px;
      background:#fff;
      border-radius: var(--r-xl);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:none;
      z-index:40;
      color: var(--ink);
    }
    .comboHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 16px;
      border-bottom:1px solid rgba(15,23,42,.08);
      background: linear-gradient(180deg, rgba(91,44,255,.06), rgba(255,255,255,1));
    }
    .comboTitle{
      font-weight:1000;
      letter-spacing:-.2px;
      display:flex; gap:10px; align-items:center;
    }
    .comboHint{
      color:var(--muted);
      font-weight:850;
      font-size:13px;
    }
    .comboList{
      max-height:360px;
      overflow:auto;
      padding:8px;
      background:#fff;
    }
    .row{
      display:flex;
      gap:12px;
      align-items:center;
      padding:14px 12px;
      border-radius:18px;
      cursor:pointer;
      border:1px solid transparent;
    }
    .row:hover{
      background: rgba(91,44,255,.06);
      border-color: rgba(91,44,255,.12);
    }
    .rowIcon{
      width:40px; height:40px;
      border-radius:999px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(15,23,42,.04);
      border:1px solid rgba(15,23,42,.08);
      font-size:18px;
      flex:0 0 auto;
    }
    .rowMain{ display:flex; flex-direction:column; gap:2px; min-width:0; }
    .rowName{ font-weight:1000; letter-spacing:-.2px; }
    .rowMeta{ color:var(--muted); font-weight:850; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    /* CONTENT BELOW */
    .section{ padding:22px 0 50px; }
    .h2{
      margin:0 0 8px;
      font-size:38px;
      letter-spacing:-.7px;
    }
    .sub{
      margin:0 0 18px;
      color:var(--muted);
      font-weight:850;
      line-height:1.5;
    }

    .cards{
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .card{
      background: rgba(255,255,255,.88);
      border:1px solid rgba(15,23,42,.10);
      border-radius: var(--r-xl);
      box-shadow: var(--softshadow);
      overflow:hidden;
      cursor:pointer;
    }
    .cardTop{
      display:flex;
      justify-content:space-between;
      gap:12px;
      padding:18px 18px;
      align-items:flex-start;
    }
    .cardTitle{
      font-weight:1000;
      font-size:22px;
      letter-spacing:-.3px;
      margin:0 0 8px;
    }
    .tags{ display:flex; flex-wrap:wrap; gap:8px; }
    .tag{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.7);
      font-weight:950;
      color: rgba(15,23,42,.72);
      font-size:12.5px;
    }
    .match{
      font-weight:1000;
      font-size:20px;
      color: #103d9b;
      white-space:nowrap;
      padding-top:2px;
    }
    .cardBody{
      display:none;
      padding:0 18px 18px;
      border-top:1px solid rgba(15,23,42,.08);
      background: rgba(255,255,255,.82);
    }
    .bodyGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      padding-top:14px;
    }
    .box{
      border:1px solid rgba(15,23,42,.08);
      background: rgba(255,255,255,.9);
      border-radius: 18px;
      padding:14px;
    }
    .box h4{
      margin:0 0 10px;
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .box p, .box li{
      margin:0;
      color: var(--muted);
      font-weight:850;
      line-height:1.55;
      font-size:14px;
    }
    .box ul{
      margin:0;
      padding-left:18px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .actionsRow{
      margin-top:18px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .ghost{
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      border-radius: 999px;
      padding:10px 14px;
      font-weight:1000;
      cursor:pointer;
    }

    @media (max-width: 980px){
      .heroGrid{ grid-template-columns: 1fr; }
      .heroLeft h1{ font-size:44px; }
      .searchbar{ grid-template-columns: 1fr; }
      .comboPanel{ top:104px; }
      .bodyGrid{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbarInner">
      <div class="brand"><span class="dot"></span> CareerPicker</div>
      <div class="topActions">
        <button class="pillBtn" id="aboutBtn">About</button>
        <button class="pillBtn primary" id="saveBtn">Save (later)</button>
      </div>
    </div>
  </div>

  <div class="wrap hero">
    <div class="heroGrid">
      <div class="heroLeft">
        <h1>Pick a real profession, then see related paths.</h1>
        <p>
          Type to search. Scroll to browse. If it‚Äôs not in the list, it won‚Äôt match (real job list only).
          Your score unlocks more options ‚Äî low scores still have trades, logistics, hospitality, and more.
        </p>

        <div class="searchWrap">
          <div class="searchbar">
            <!-- Profession -->
            <div class="field" id="professionField">
              <div class="icon">üß≠</div>
              <div style="width:100%">
                <div class="label">Profession (must pick from list)</div>
                <input id="professionInput" placeholder="Type a profession (e.g., Electrician, Lawyer, Nurse)"/>
                <div style="margin-top:6px; color:rgba(15,23,42,.58); font-weight:900; font-size:12.5px;">
                  <span id="shownCount">0</span> shown ‚Ä¢ <span id="eligibleCount">0</span> eligible in total
                </div>
              </div>
            </div>

            <!-- ATAR/GPA -->
            <div class="field">
              <div class="icon">üìå</div>
              <div style="width:100%">
                <div class="label" id="scoreLabel">ATAR (0.00‚Äì99.95)</div>
                <input id="scoreInput" type="number" step="0.05" min="0" max="99.95" value="70.00"/>
              </div>
            </div>

            <!-- Salary -->
            <div class="field">
              <div class="icon">üí∞</div>
              <div style="width:100%">
                <div class="label">Salary circumstance (AUD)</div>
                <select id="salarySelect">
                  <option value="low">Low: supporting self ‚Ä¢ $40k‚Äì$70k</option>
                  <option value="mid" selected>Medium: family support ‚Ä¢ $70k‚Äì$120k</option>
                  <option value="high">High: maximise earnings ‚Ä¢ $120k+</option>
                </select>
              </div>
            </div>

            <button class="btn" id="searchBtn" disabled>Get shortlist</button>
          </div>

          <div class="metaLine">
            <div class="metaPill">Mode: <b id="modePill">ATAR</b></div>
            <div class="metaPill">Input: <b id="inputPill">70.00</b></div>
            <div class="metaPill">Eligibility: <b id="eligPill">‚Äî</b></div>
          </div>

          <div class="errorLine" id="errorLine">Pick a profession from the list to continue.</div>

          <!-- Dropdown Panel -->
          <div class="comboPanel" id="comboPanel">
            <div class="comboHeader">
              <div class="comboTitle">Professions</div>
              <div class="comboHint">Type to filter ‚Ä¢ Scroll ‚Ä¢ Enter to select</div>
            </div>
            <div class="comboList" id="comboList"></div>
          </div>
        </div>
      </div>

      <div class="heroRight">
        <div class="miniCard">
          <div class="miniTitle">Real-list matching</div>
          <p class="miniText">You can‚Äôt type a random job and force it ‚Äî it must exist in the list.</p>
        </div>
        <div class="miniCard">
          <div class="miniTitle">Explainable output</div>
          <p class="miniText">Shortlist shows why it fits, day-to-day tasks, and how to start.</p>
        </div>
        <div class="miniCard">
          <div class="miniTitle">Prototype-safe evidence notes</div>
          <p class="miniText">We label ‚Äúrule of thumb‚Äù vs ‚Äúformal requirement‚Äù, so we don‚Äôt pretend certainty.</p>
        </div>
        <div class="miniCard">
          <div class="miniTitle">Mode switch</div>
          <p class="miniText">ATAR uses 0‚Äì99.95. GPA uses 0‚Äì7. (Not 100.)</p>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap section">
    <div class="h2">Your shortlist</div>
    <div class="sub">Click a card to expand details. (Each card is different.)</div>

    <div class="cards" id="results"></div>

    <div class="actionsRow">
      <button class="ghost" id="resetBtn">Reset</button>
      <button class="ghost" id="modeBtn">Switch to GPA</button>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    // ---------- Data ----------
    // NOTE: This includes a lot, and you can keep adding.
    // Each job has: title, emoji, category, tags, atarMin, gpaMin, salaryBand
    // salaryBand: low | mid | high (rough)
    const JOBS = [
      // Healthcare
      job("Doctor", "ü©∫", "Healthcare", ["Medicine","Hospital","Patient care"], 95, 6.6, "high", {
        day: "Diagnose, treat, manage care plans, coordinate with specialists.",
        start: "ATAR usually very high. Start with strong science subjects + UMAT/UCAT style prep (varies).",
        evidence: "Formal requirements vary by uni + state. Score shown is a prototype rule-of-thumb."
      }),
      job("Nurse", "üßë‚Äç‚öïÔ∏è", "Healthcare", ["Ward","Patient care","Clinical"], 70, 5.5, "mid", {
        day: "Assess patients, administer meds, monitor vitals, coordinate care.",
        start: "ATAR often moderate. Multiple pathways (uni/TAFE-to-uni).",
        evidence: "Exact cutoffs vary by institution."
      }),
      job("Paramedic", "üöë", "Healthcare", ["Emergency","First response","Trauma"], 75, 5.8, "mid", {
        day: "Emergency response, triage, stabilise patients, transport safely.",
        start: "Fitness + communication matter. Pathways depend on state + uni.",
        evidence: "Entry requirements vary."
      }),
      job("Pharmacist", "üíä", "Healthcare", ["Medicines","Counselling","Chemistry"], 80, 6.0, "mid", {
        day: "Dispense medicines, advise patients, check interactions.",
        start: "Strong science helps. Uni pathway.",
        evidence: "Cutoffs vary by course demand."
      }),
      job("Physiotherapist", "ü¶¥", "Healthcare", ["Rehab","Movement","Sports"], 80, 6.0, "mid", {
        day: "Rehab plans, exercises, injury recovery, mobility improvement.",
        start: "Uni pathway. Sport/biology helpful.",
        evidence: "Varies by university."
      }),

      // Law & justice
      job("Lawyer", "‚öñÔ∏è", "Law", ["Court","Contracts","Advice"], 85, 6.0, "high", {
        day: "Research, draft documents, advise clients, negotiate, sometimes court.",
        start: "Strong writing + reasoning. Uni pathway. Competitive.",
        evidence: "ATAR shown is a guideline; exact cutoffs differ."
      }),
      job("Paralegal", "üìö", "Law", ["Legal support","Documents","Research"], 55, 4.5, "mid", {
        day: "Prepare documents, manage case files, support lawyers.",
        start: "TAFE/uni pathways. Organisation matters.",
        evidence: "Some roles accept experience over score."
      }),
      job("Police Officer", "üöì", "Justice", ["Public safety","Community","Training"], 45, 4.0, "mid", {
        day: "Community policing, respond to incidents, investigations support.",
        start: "Fitness + background checks. Academy training.",
        evidence: "Entry is not purely ATAR/GPA‚Äîmore holistic."
      }),
      job("Detective", "üïµÔ∏è", "Justice", ["Investigations","Evidence","Interviews"], 55, 4.5, "mid", {
        day: "Investigate cases, gather evidence, interview suspects/witnesses.",
        start: "Usually after experience as police officer.",
        evidence: "Progression role (not direct entry)."
      }),

      // Tech
      job("Software Developer", "üíª", "Technology", ["Coding","Apps","Systems"], 60, 5.0, "high", {
        day: "Build software, debug, design features, collaborate in teams.",
        start: "Uni or self-taught + portfolio. Maths helps.",
        evidence: "ATAR can be low with strong alt pathways."
      }),
      job("Cybersecurity Analyst", "üõ°Ô∏è", "Technology", ["Security","Threats","Networks"], 65, 5.2, "high", {
        day: "Monitor threats, respond to incidents, harden systems.",
        start: "IT foundations + security certs. Labs/CTFs help.",
        evidence: "Certifications often matter as much as score."
      }),
      job("Data Analyst", "üìä", "Technology", ["Data","Insights","Excel/SQL"], 55, 4.8, "mid", {
        day: "Clean data, build dashboards, answer business questions.",
        start: "Learn Excel/SQL + basic stats. Portfolio projects help.",
        evidence: "Many entry routes."
      }),
      job("UX Designer", "üé®", "Creative", ["Design","User research","Prototypes"], 50, 4.5, "mid", {
        day: "Design flows, test with users, iterate UI prototypes.",
        start: "Portfolio is key. Many non-ATAR pathways.",
        evidence: "Often portfolio > score."
      }),

      // Trades
      job("Electrician", "‚ö°", "Trades", ["Wiring","Safety","Apprenticeship"], 30, 3.5, "mid", {
        day: "Install/repair wiring, test systems, follow safety rules.",
        start: "Apprenticeship pathway. Strong demand.",
        evidence: "Score not the main gate‚Äîtraining + apprenticeship is."
      }),
      job("Plumber", "üö∞", "Trades", ["Pipes","Repairs","Apprenticeship"], 30, 3.5, "mid", {
        day: "Install/repair plumbing, diagnose leaks, compliance work.",
        start: "Apprenticeship. On-the-job learning.",
        evidence: "Often not ATAR-gated."
      }),
      job("Carpenter", "ü™ö", "Trades", ["Construction","Build","Apprenticeship"], 25, 3.2, "mid", {
        day: "Frame structures, measure/cut materials, site work.",
        start: "Apprenticeship. Practical skills.",
        evidence: "Entry is training-based."
      }),

      // Business
      job("Accountant", "üßæ", "Business", ["Finance","Tax","Reporting"], 55, 4.8, "mid", {
        day: "Prepare reports, manage budgets, tax planning, audits.",
        start: "Uni pathway or vocational stepping-stones.",
        evidence: "Requirements vary by role."
      }),
      job("Business Analyst", "üß†", "Business", ["Processes","Requirements","Stakeholders"], 55, 4.8, "high", {
        day: "Translate business needs into requirements, improve processes.",
        start: "Communication + analysis. Tech/business mix helps.",
        evidence: "Portfolio/case studies can help entry."
      }),

      // Logistics / hospitality so low scores still have options
      job("Chef", "üç≥", "Hospitality", ["Kitchen","Food","Pressure"], 25, 3.2, "mid", {
        day: "Prep/cook meals, manage service, food safety.",
        start: "Apprenticeship/TAFE. Build experience fast.",
        evidence: "Skills + experience dominant."
      }),
      job("Hotel Manager", "üè®", "Hospitality", ["Operations","Guests","Teams"], 45, 4.0, "mid", {
        day: "Run operations, manage staff, improve guest experience.",
        start: "Experience-driven, hospitality courses help.",
        evidence: "Often promotion-based."
      }),
      job("Truck Driver", "üöö", "Logistics", ["Transport","Routes","Licensing"], 20, 3.0, "mid", {
        day: "Deliver goods, plan routes, comply with safety rules.",
        start: "Licensing + safety. Reliability matters.",
        evidence: "Not score-gated."
      }),
      job("Warehouse Supervisor", "üì¶", "Logistics", ["Inventory","Team","Safety"], 25, 3.2, "mid", {
        day: "Coordinate dispatch, manage stock, improve efficiency.",
        start: "Often starts as warehouse worker then promoted.",
        evidence: "Experience-led."
      }),
    ];

    // ‚ÄúMore jobs‚Äù: we‚Äôll generate additional realistic titles by variations
    // (still prototype list ‚Äî you can replace with your own curated dataset later)
    const EXTRA_TITLES = [
      ["Healthcare","üß¨", ["Lab","Testing","Science"], 55, 4.7, "mid",
        ["Medical Laboratory Technician","Radiology Assistant","Dental Assistant","Aged Care Worker","Occupational Therapy Assistant"]],
      ["Technology","üß©", ["IT","Support","Systems"], 40, 4.0, "mid",
        ["IT Support Technician","Network Technician","Cloud Support Associate","QA Tester","Product Manager"]],
      ["Creative","üñåÔ∏è", ["Media","Content","Brand"], 35, 3.8, "mid",
        ["Graphic Designer","Videographer","Content Creator","Animator","Photographer"]],
      ["Business","üìà", ["Sales","Ops","Growth"], 35, 3.8, "mid",
        ["Sales Representative","Operations Coordinator","HR Assistant","Marketing Coordinator","Project Coordinator"]],
      ["Trades","üß∞", ["Hands-on","Apprentice","Site"], 20, 3.0, "mid",
        ["Mechanic","Welder","HVAC Technician","Painter","Bricklayer"]],
      ["Education","üçé", ["Teaching","Learning","Kids"], 60, 5.0, "mid",
        ["Primary Teacher","Secondary Teacher","Teacher Aide","Tutor","Early Childhood Educator"]],
    ];

    // Expand to roughly ~200 by adding variants
    const VARIANTS = ["(Entry)","(Associate)","(Specialist)","(Junior)","(Senior)"];
    function buildExtras(){
      const list = [];
      for(const block of EXTRA_TITLES){
        const [cat, emoji, tags, atarMin, gpaMin, salaryBand, titles] = block;
        for(const t of titles){
          list.push(job(t, emoji, cat, tags, atarMin, gpaMin, salaryBand, makeDetails(t, cat)));
          // create a couple variants
          list.push(job(t+" "+VARIANTS[0], emoji, cat, tags, Math.max(0, atarMin-10), Math.max(0, gpaMin-0.6), salaryBand, makeDetails(t+" "+VARIANTS[0], cat)));
          list.push(job(t+" "+VARIANTS[2], emoji, cat, tags, atarMin+5, gpaMin+0.3, salaryBand, makeDetails(t+" "+VARIANTS[2], cat)));
        }
      }

      // Ensure we have lots; duplicate with small tag changes for prototype
      while(list.length < 170){
        const base = list[list.length % list.length];
        const cloneTitle = base.title + " " + VARIANTS[(list.length % VARIANTS.length)];
        list.push(job(
          cloneTitle,
          base.emoji,
          base.category,
          base.tags.slice(0,2).concat(["Pathways"]),
          clampATAR(base.atarMin + (list.length % 3)*2),
          clampGPA(base.gpaMin + (list.length % 3)*0.1),
          base.salaryBand,
          makeDetails(cloneTitle, base.category)
        ));
      }
      return list;
    }
    JOBS.push(...buildExtras());

    function job(title, emoji, category, tags, atarMin, gpaMin, salaryBand, details){
      return { title, emoji, category, tags, atarMin, gpaMin, salaryBand, details };
    }

    function makeDetails(title, category){
      const starts = {
        "Healthcare":"Study path + placements matter. Communication and responsibility are key.",
        "Law":"Strong writing, reading, and argument skills. Pathways often uni-based.",
        "Justice":"Fitness, ethics, communication, and training pipelines matter.",
        "Technology":"Portfolio/projects help a lot. You can enter via uni or self-taught paths.",
        "Trades":"Apprenticeships and hands-on training. Reliability and safety matter.",
        "Business":"Communication + problem-solving. Internships/experience help.",
        "Creative":"Portfolio matters most. Practice + feedback loops are key.",
        "Hospitality":"Experience-led. Consistency and teamwork matter.",
        "Logistics":"Reliability and safety. Often promotion-based."
      };
      const day = {
        "Healthcare":"Client/patient facing tasks, teamwork, careful documentation, safety protocols.",
        "Law":"Research, drafting, advice, negotiation, structured reasoning.",
        "Justice":"Public-facing work, rules/procedures, communication, reporting.",
        "Technology":"Building/testing systems, debugging, planning features, collaboration.",
        "Trades":"Hands-on work, tools, safety, practical problem solving.",
        "Business":"Meetings, planning, analysis, coordination, stakeholder work.",
        "Creative":"Designing, iterating, producing, presenting, feedback cycles.",
        "Hospitality":"Service delivery, operations, time pressure, teamwork.",
        "Logistics":"Planning, movement of goods, safety, coordination."
      };
      return {
        day: `${day[category] || "Day-to-day depends on the exact employer and role type."}`,
        start: `${starts[category] || "Multiple pathways exist. Build skills + experience."}`,
        evidence: "Prototype notes: requirements differ by institution/employer. Treat as guidance, not a promise."
      };
    }

    function clampATAR(x){ return Math.max(0, Math.min(99.95, Number(x.toFixed(2)))); }
    function clampGPA(x){ return Math.max(0, Math.min(7.0, Number(x.toFixed(2)))); }

    // ---------- State ----------
    let mode = "ATAR"; // or "GPA"
    let selectedJob = null;

    // ---------- Elements ----------
    const professionInput = $("professionInput");
    const comboPanel = $("comboPanel");
    const comboList = $("comboList");
    const searchBtn = $("searchBtn");
    const scoreInput = $("scoreInput");
    const scoreLabel = $("scoreLabel");
    const modeBtn = $("modeBtn");
    const errorLine = $("errorLine");

    // ---------- Helpers ----------
    function currentScore(){
      const v = parseFloat(scoreInput.value || "0");
      return isNaN(v) ? 0 : v;
    }

    function eligible(jobObj){
      preventsNaN(jobObj);
      if(mode === "ATAR"){
        return currentScore() >= jobObj.atarMin;
      }
      return currentScore() >= jobObj.gpaMin;
    }

    function preventsNaN(j){
      j.atarMin = clampATAR(Number(j.atarMin || 0));
      j.gpaMin = clampGPA(Number(j.gpaMin || 0));
    }

    function salaryWeight(jobObj){
      const v = $("salarySelect").value; // low/mid/high
      // simple nudge: match salary band -> bonus
      if(jobObj.salaryBand === v) return 10;
      if(v === "high" && jobObj.salaryBand === "mid") return 6;
      if(v === "mid" && (jobObj.salaryBand === "low" || jobObj.salaryBand === "high")) return 6;
      if(v === "low" && jobObj.salaryBand === "mid") return 6;
      return 3;
    }

    function matchPercent(jobObj){
      // not AI ‚Äî just transparent scoring
      // score components: eligibility + salary alignment + closeness to requirement
      const s = currentScore();
      const req = (mode==="ATAR") ? jobObj.atarMin : jobObj.gpaMin;
      const max = (mode==="ATAR") ? 99.95 : 7.0;

      // closeness: if way above requirement -> higher confidence
      const headroom = Math.max(0, Math.min(1, (s-req)/(max-req || 1)));
      const elig = eligible(jobObj) ? 1 : 0;

      // if not eligible, still compute a ‚Äúnear‚Äù score so low scores still see options
      const near = Math.max(0, Math.min(1, s/(req || 1)));

      const base = (elig ? (0.55 + 0.30*headroom) : (0.15 + 0.25*near));
      const sal = salaryWeight(jobObj)/10 * 0.15;

      return Math.round((base + sal) * 100);
    }

    function shortlistForSelected(){
      if(!selectedJob) return [];

      // Use selected job to propose related careers: same category first, then adjacent categories
      const sameCat = JOBS.filter(j => j.category === selectedJob.category);
      const adjacentCats = JOBS.filter(j => j.category !== selectedJob.category);

      const candidates = [...sameCat, ...adjacentCats];

      // Must be eligible ‚Äî BUT if score is low, still show eligible ones (always exist due to trades/logistics etc.)
      const eligibles = candidates.filter(eligible);

      // If eligible list is small, still show some close-to-eligible from same category as ‚Äústretch‚Äù (marked)
      const stretch = candidates
        .filter(j => !eligible(j))
        .sort((a,b)=> matchPercent(b)-matchPercent(a))
        .slice(0, 3);

      const rankedEligible = eligibles
        .sort((a,b)=> (matchPercent(b)-matchPercent(a)) || (b.atarMin-a.atarMin))
        .slice(0, 6);

      // ensure we always return at least 3
      const out = [...rankedEligible];
      while(out.length < 3){
        // fallback: add easiest eligible jobs overall
        const allEligible = JOBS.filter(eligible).sort((a,b)=> matchPercent(b)-matchPercent(a));
        for(const j of allEligible){
          if(out.length>=3) break;
          if(!out.some(x=>x.title===j.title)) out.push(j);
        }
        break;
      }

      // Add stretch options if they‚Äôre close and not duplicates
      for(const j of stretch){
        if(out.length>=6) break;
        if(!out.some(x=>x.title===j.title)) out.push(j);
      }

      return out.slice(0,6);
    }

    // ---------- Dropdown ----------
    function openDropdown(){
      comboPanel.style.display = "block";
      renderDropdown();
    }
    function closeDropdown(){
      comboPanel.style.display = "none";
    }

    function filterJobs(q){
      q = (q || "").trim().toLowerCase();
      if(!q) return JOBS.slice(0, 80); // show top chunk
      return JOBS.filter(j => j.title.toLowerCase().includes(q)).slice(0, 120);
    }

    function renderDropdown(){
      const list = filterJobs(professionInput.value);
      comboList.innerHTML = "";

      $("shownCount").textContent = list.length;
      $("eligibleCount").textContent = JOBS.filter(eligible).length;

      for(const j of list){
        const row = document.createElement("div");
        row.className = "row";
        row.innerHTML = `
          <div class="rowIcon">${j.emoji}</div>
          <div class="rowMain">
            <div class="rowName">${escapeHtml(j.title)}</div>
            <div class="rowMeta">${escapeHtml(j.category)} ‚Ä¢ ${escapeHtml(j.tags.join(" ‚Ä¢ "))}</div>
          </div>
        `;
        row.addEventListener("click", () => selectJob(j));
        comboList.appendChild(row);
      }

      if(list.length === 0){
        const empty = document.createElement("div");
        empty.style.padding = "18px";
        empty.style.color = "var(--muted)";
        empty.style.fontWeight = "900";
        empty.textContent = "No matches. It must exist in the list.";
        comboList.appendChild(empty);
      }
    }

    function selectJob(j){
      selectedJob = j;
      professionInput.value = j.title;
      closeDropdown();
      errorLine.style.display = "none";
      searchBtn.disabled = false;
      updateMeta();
      renderResults();
    }

    function updateMeta(){
      $("modePill").textContent = mode;
      $("inputPill").textContent = Number(currentScore()).toFixed(mode==="ATAR" ? 2 : 2);
      const eligibleCount = JOBS.filter(eligible).length;
      $("eligPill").textContent = `${eligibleCount} / ${JOBS.length}`;
    }

    // ---------- Results ----------
    function renderResults(){
      const root = $("results");
      root.innerHTML = "";

      if(!selectedJob){
        return;
      }

      const picks = shortlistForSelected();

      for(let i=0;i<picks.length;i++){
        const j = picks[i];
        const pct = matchPercent(j);

        const isStretch = !eligible(j);
        const chips = j.tags.slice(0,4).map(t => `<span class="tag">${escapeHtml(t)}</span>`).join("");

        const c = document.createElement("div");
        c.className = "card";
        c.innerHTML = `
          <div class="cardTop">
            <div style="min-width:0">
              <div class="cardTitle">${i+1}. ${escapeHtml(j.title)} ${isStretch ? " ‚Ä¢ Stretch" : ""}</div>
              <div class="tags">${chips}</div>
            </div>
            <div class="match">${pct}% match</div>
          </div>

          <div class="cardBody">
            <div class="bodyGrid">
              <div class="box">
                <h4>What you‚Äôd do day-to-day</h4>
                <p>${escapeHtml(j.details.day)}</p>
              </div>

              <div class="box">
                <h4>How to start</h4>
                <p>${escapeHtml(j.details.start)}</p>
              </div>

              <div class="box">
                <h4>Why it fits (based on your inputs)</h4>
                <ul>
                  ${whyItFitsBullets(j).map(x=>`<li>${escapeHtml(x)}</li>`).join("")}
                </ul>
              </div>

              <div class="box">
                <h4>Evidence note</h4>
                <p>${escapeHtml(j.details.evidence)}</p>
              </div>
            </div>
          </div>
        `;
        c.addEventListener("click", (e) => {
          // don‚Äôt toggle if selecting text
          const body = c.querySelector(".cardBody");
          const open = body.style.display === "block";
          body.style.display = open ? "none" : "block";
        });
        root.appendChild(c);
      }
    }

    function whyItFitsBullets(j){
      const s = currentScore();
      const req = (mode==="ATAR") ? j.atarMin : j.gpaMin;
      const sal = $("salarySelect").value;

      const bullets = [];
      if(eligible(j)){
        bullets.push(`You meet the ${mode} guideline for this role (‚â• ${req}).`);
      }else{
        bullets.push(`You‚Äôre close to the guideline (${mode} ${s} vs suggested ‚â• ${req}). This is a stretch option.`);
      }

      if(j.category === selectedJob.category){
        bullets.push(`It‚Äôs in the same cluster as your chosen profession (${selectedJob.category}).`);
      }else{
        bullets.push(`It‚Äôs a related cluster that often overlaps skills with ${selectedJob.category}.`);
      }

      if(sal === j.salaryBand){
        bullets.push(`Matches your salary circumstance preference (${sal}).`);
      }else{
        bullets.push(`Salary preference mismatch is okay ‚Äî you can still pursue it if you value the work.`);
      }

      // add one unique bullet per category so they don‚Äôt feel copy-paste
      const unique = {
        "Healthcare":"People skills + responsibility are strongly rewarded here.",
        "Law":"Strong reading/writing and structured argument make you stand out.",
        "Justice":"Communication under pressure is a major differentiator.",
        "Technology":"Projects/portfolio can accelerate entry regardless of score.",
        "Trades":"Apprenticeships give a practical route even with lower scores.",
        "Business":"Stakeholder communication often matters as much as grades.",
        "Creative":"Portfolio quality is usually the main gate (not scores).",
        "Hospitality":"Experience and consistency can beat academic filters fast.",
        "Logistics":"Reliability + safety record can drive rapid progression."
      };
      bullets.push(unique[j.category] || "Multiple pathways exist ‚Äî skills + evidence matter.");

      return bullets.slice(0,4);
    }

    // ---------- Events ----------
    $("professionField").addEventListener("click", () => openDropdown());
    professionInput.addEventListener("focus", openDropdown);

    professionInput.addEventListener("input", () => {
      openDropdown();
      renderDropdown();
      // If typed value isn't exact, don't allow search
      if(!JOBS.some(j => j.title.toLowerCase() === professionInput.value.trim().toLowerCase())){
        selectedJob = null;
        searchBtn.disabled = true;
        errorLine.style.display = professionInput.value.trim() ? "block" : "none";
        $("results").innerHTML = "";
      }
    });

    professionInput.addEventListener("keydown", (e) => {
      if(e.key === "Escape") closeDropdown();
      if(e.key === "Enter"){
        const exact = JOBS.find(j => j.title.toLowerCase() === professionInput.value.trim().toLowerCase());
        if(exact) selectJob(exact);
        else{
          errorLine.style.display = "block";
        }
      }
    });

    document.addEventListener("click", (e) => {
      const within = $("professionField").contains(e.target) || comboPanel.contains(e.target);
      if(!within) closeDropdown();
    });

    scoreInput.addEventListener("input", () => {
      updateMeta();
      renderDropdown();
      if(selectedJob) renderResults();
    });

    $("salarySelect").addEventListener("change", () => {
      if(selectedJob) renderResults();
    });

    searchBtn.addEventListener("click", () => {
      if(!selectedJob){
        errorLine.style.display = "block";
        return;
      }
      renderResults();
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    });

    $("resetBtn").addEventListener("click", () => {
      selectedJob = null;
      professionInput.value = "";
      searchBtn.disabled = true;
      $("results").innerHTML = "";
      errorLine.style.display = "none";
      updateMeta();
    });

    modeBtn.addEventListener("click", () => {
      mode = (mode === "ATAR") ? "GPA" : "ATAR";
      if(mode === "ATAR"){
        scoreLabel.textContent = "ATAR (0.00‚Äì99.95)";
        scoreInput.min = "0";
        scoreInput.max = "99.95";
        scoreInput.step = "0.05";
        scoreInput.value = "70.00";
        modeBtn.textContent = "Switch to GPA";
      }else{
        scoreLabel.textContent = "GPA (0.00‚Äì7.00)";
        scoreInput.min = "0";
        scoreInput.max = "7";
        scoreInput.step = "0.01";
        scoreInput.value = "5.50";
        modeBtn.textContent = "Switch to ATAR";
      }
      updateMeta();
      renderDropdown();
      if(selectedJob) renderResults();
    });

    $("aboutBtn").addEventListener("click", () => {
      alert("CareerPicker prototype: pick a real profession from the list, then see related paths. Requirements vary by institution/employer ‚Äî treat as guidance.");
    });

    $("saveBtn").addEventListener("click", () => {
      alert("Save later: We can add localStorage or accounts later. For now, take screenshots or copy notes.");
    });

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // init
    updateMeta();
    renderDropdown();
  </script>
</body>
</html>
