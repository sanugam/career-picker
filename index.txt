<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>CareerPicker</title>
  <style>
    :root{
      --blue:#003580;
      --blue2:#004cb8;
      --yellow:#febb02;
      --bg:#f5f7fb;
      --text:#111;
      --muted:#6b7280;
      --card:#fff;
      --stroke:#e5e7eb;
      --shadow: 0 10px 28px rgba(16,24,40,.10);
      --shadow2: 0 6px 18px rgba(16,24,40,.12);
      --radius:16px;
      --radius2:14px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:var(--bg);
    }

    /* Top bar */
    .topbar{
      background:var(--blue);
      color:#fff;
      padding:14px 18px;
      position:sticky;
      top:0;
      z-index:50;
    }
    .topbar-inner{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      font-weight:800;
      letter-spacing:.2px;
    }
    .nav{
      display:flex;
      gap:10px;
      align-items:center;
      font-size:14px;
      opacity:.95;
    }
    .pill{
      border:1px solid rgba(255,255,255,.25);
      padding:8px 10px;
      border-radius:999px;
      display:flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .btn-ghost{
      border:1px solid rgba(255,255,255,.35);
      background:transparent;
      color:#fff;
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
    }
    .btn-ghost:hover{background:rgba(255,255,255,.08)}
    .btn-light{
      background:#fff;
      color:var(--blue);
      border:1px solid rgba(255,255,255,.3);
      padding:8px 12px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
    }

    /* Hero */
    .hero{
      background:linear-gradient(180deg, var(--blue) 0%, #002a64 100%);
      color:#fff;
      padding:38px 18px 34px;
    }
    .wrap{
      max-width:1100px;
      margin:0 auto;
    }
    .hero h1{
      margin:0;
      font-size:54px;
      line-height:1.02;
      letter-spacing:-.6px;
    }
    .hero p{
      margin:10px 0 0;
      font-size:18px;
      color:rgba(255,255,255,.88);
      max-width:720px;
    }

    /* Search bar */
    .searchbar{
      margin-top:18px;
      background:var(--yellow);
      border-radius:18px;
      padding:4px;
      display:grid;
      grid-template-columns: 1.7fr .6fr .75fr .35fr;
      gap:4px;
      box-shadow: var(--shadow);
      position:relative;
    }
    .field{
      background:#fff;
      border-radius:14px;
      padding:12px 14px;
      display:flex;
      flex-direction:column;
      gap:6px;
      min-height:74px;
      position:relative;
    }
    .label{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .input{
      border:none;
      outline:none;
      font-size:16px;
      font-weight:700;
      width:100%;
      background:transparent;
    }
    .select{
      border:none;
      outline:none;
      font-size:16px;
      font-weight:700;
      width:100%;
      background:transparent;
      appearance:none;
      cursor:pointer;
    }
    .searchbtn{
      background:var(--blue);
      color:#fff;
      border:none;
      border-radius:14px;
      font-weight:900;
      font-size:18px;
      cursor:pointer;
      box-shadow: var(--shadow2);
    }
    .searchbtn:hover{background:#002d6b}

    /* Dropdown panel (Booking-like) */
    .dropdown{
      position:absolute;
      left:0;
      right:0;
      top:78px;
      z-index:40;
      display:none;
      padding:0 0 0 0;
    }
    .dropdown.open{display:block;}
    .dd-card{
      background:#fff;
      border:1px solid var(--stroke);
      border-radius:16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      max-width:520px;
      margin-left:0; /* aligns under first field */
    }
    .dd-title{
      padding:14px 16px;
      font-weight:900;
      color:#111;
      border-bottom:1px solid var(--stroke);
      background:#fafafa;
    }
    .dd-list{
      max-height:340px;
      overflow:auto;
    }
    .dd-item{
      display:flex;
      gap:12px;
      padding:14px 16px;
      cursor:pointer;
      border-bottom:1px solid #f0f2f6;
      align-items:flex-start;
    }
    .dd-item:last-child{border-bottom:none;}
    .dd-item:hover{background:#f6f9ff;}
    .dd-ico{
      width:34px;height:34px;
      border-radius:10px;
      background:#f1f5ff;
      display:flex;align-items:center;justify-content:center;
      flex:0 0 auto;
      color:var(--blue2);
      font-weight:900;
    }
    .dd-main{min-width:0}
    .dd-name{
      font-weight:900;
      margin:0;
      line-height:1.1;
    }
    .dd-sub{
      margin:3px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.2;
    }
    .hint{
      margin-top:10px;
      font-size:13px;
      color:rgba(255,255,255,.85);
    }

    /* Cards row */
    .cards{
      margin:18px 0 8px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:14px;
    }
    .mini{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:16px;
      padding:14px;
      box-shadow: 0 1px 0 rgba(16,24,40,.04);
    }
    .mini h3{
      margin:0;
      font-size:15px;
      font-weight:900;
    }
    .mini p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.3;
    }

    /* Results */
    .section{
      padding:18px 18px 40px;
    }
    .section h2{
      margin:10px 0 14px;
      font-size:28px;
      letter-spacing:-.2px;
    }
    .results{
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .result{
      background:#fff;
      border:1px solid var(--stroke);
      border-radius:18px;
      box-shadow: 0 12px 22px rgba(16,24,40,.05);
      overflow:hidden;
    }
    .result-top{
      padding:16px 18px 12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
    }
    .result h3{
      margin:0;
      font-size:22px;
      font-weight:950;
      letter-spacing:-.2px;
    }
    .match{
      font-weight:950;
      color:var(--blue2);
      font-size:20px;
      white-space:nowrap;
    }
    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      padding:0 18px 12px;
    }
    .chip{
      padding:6px 10px;
      border-radius:999px;
      background:#f6f7fb;
      border:1px solid #e9ecf3;
      color:#334155;
      font-size:13px;
      font-weight:800;
    }
    .why{
      padding:0 18px 16px;
      color:#111;
    }
    .why-title{
      margin:0 0 6px;
      font-weight:900;
      color:#374151;
    }
    .why ul{
      margin:0;
      padding-left:18px;
      color:#475569;
      line-height:1.45;
    }
    .actions{
      display:flex;
      gap:10px;
      padding:8px 18px 18px;
    }
    .btn{
      border:none;
      border-radius:12px;
      padding:10px 14px;
      font-weight:900;
      cursor:pointer;
    }
    .btn.secondary{
      background:#eef2ff;
      color:#1e40af;
    }
    .btn.secondary:hover{background:#e0e7ff}
    .btn.danger{
      background:#fff;
      border:1px solid var(--stroke);
      color:#111;
    }
    .btn.danger:hover{background:#fafafa}

    .hidden{display:none;}

    @media (max-width: 980px){
      .hero h1{font-size:40px;}
      .searchbar{grid-template-columns:1fr; }
      .dropdown{top: 86px;}
      .dd-card{max-width:100%; margin:0;}
      .cards{grid-template-columns:1fr 1fr;}
    }
    @media (max-width: 520px){
      .cards{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">CareerPicker</div>
      <div class="nav">
        <div class="pill">AUD</div>
        <button class="btn-ghost" type="button">Register</button>
        <button class="btn-light" type="button">Sign in</button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="wrap">
        <h1>Find your next career</h1>
        <p>Pick what you enjoy, add your ATAR/GPA, and your salary goal â€” then get a shortlist that matches your choice.</p>

        <div class="searchbar" id="searchbar">
          <!-- Interest field -->
          <div class="field" id="interestField">
            <div class="label">ðŸ§­ What do you enjoy?</div>
            <input class="input" id="interestInput" placeholder="e.g., Tech, Health, Animals, Lawâ€¦" autocomplete="off" />
            <input type="hidden" id="interestValue" />
          </div>

          <!-- ATAR -->
          <div class="field">
            <div class="label">ðŸ“Š ATAR / GPA</div>
            <input class="input" id="score" type="number" min="0" max="100" value="70" />
          </div>

          <!-- Salary -->
          <div class="field">
            <div class="label">ðŸ’° Salary goal</div>
            <select class="select" id="salary">
              <option value="low">Low</option>
              <option value="mid" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </div>

          <button class="searchbtn" id="searchBtn">Search</button>

          <!-- Dropdown panel (under the bar; aligns with first field) -->
          <div class="dropdown" id="dropdown">
            <div class="dd-card">
              <div class="dd-title">Trending interests</div>
              <div class="dd-list" id="ddList"></div>
            </div>
          </div>
        </div>

        <div class="hint">Tip: click the first box to open suggestions. Start typing to filter.</div>
      </div>
    </section>

    <section class="section">
      <div class="wrap">
        <div class="cards">
          <div class="mini">
            <h3>Fast shortlist</h3>
            <p>Get career clusters instantly. No sign-up needed.</p>
          </div>
          <div class="mini">
            <h3>Matches that make sense</h3>
            <p>Your shortlist is driven by the interest you pick.</p>
          </div>
          <div class="mini">
            <h3>Designed for students</h3>
            <p>Works for Year 9â€“12, ATAR planning, and early uni.</p>
          </div>
          <div class="mini">
            <h3>Simple, private</h3>
            <p>No personal sensitive details needed to get value.</p>
          </div>
        </div>

        <h2>Your shortlist</h2>

        <div id="results" class="results hidden"></div>

        <div class="actions hidden" id="afterActions">
          <button class="btn danger" id="resetBtn">Reset</button>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ---------- Interest options (this is your "Booking.com-style" list) ----------
    const INTERESTS = [
      { id: "tech", name: "Technology", sub: "Software, AI, data, cybersecurity", icon: "âŒ˜" },
      { id: "health", name: "Health & Medicine", sub: "Doctors, nurses, allied health", icon: "âœš" },
      { id: "animals", name: "Animals", sub: "Vet, wildlife, animal care", icon: "ðŸ¾" },
      { id: "law", name: "Law & Justice", sub: "Law, policing, legal services", icon: "âš–" },
      { id: "engineering", name: "Engineering", sub: "Civil, mechanical, electrical", icon: "âš™" },
      { id: "creative", name: "Creative & Design", sub: "UI/UX, media, design, content", icon: "âœ¦" },
      { id: "business", name: "Business", sub: "Finance, management, marketing", icon: "â–¦" },
      { id: "science", name: "Science", sub: "Biology, chemistry, research", icon: "ðŸ§ª" },
      { id: "education", name: "Education", sub: "Teaching, tutoring, learning design", icon: "ðŸŽ“" },
      { id: "sports", name: "Sports & Fitness", sub: "Coaching, physio, performance", icon: "ðŸƒ" },
      { id: "hospitality", name: "Hospitality", sub: "Food, hotels, tourism, events", icon: "â˜•" },
      { id: "trades", name: "Trades", sub: "Electrician, plumbing, construction", icon: "ðŸ”§" },
      { id: "transport", name: "Transport", sub: "Aviation, logistics, driving", icon: "âœˆ" }
    ];

    // ---------- Shortlist templates mapped to interest ----------
    // Each interest produces TOP 3 clusters + job tags + reasons.
    const SHORTLIST_BY_INTEREST = {
      tech: [
        {
          title: "Software & AI",
          tags: ["Software Dev", "AI/ML", "Web/App", "Cloud"],
          why: [
            "Strong match if you like coding, problem-solving, building apps.",
            "High growth and many specialisations (frontend, backend, AI, mobile).",
            "Multiple paths: uni/TAFE/self-taught + projects."
          ]
        },
        {
          title: "Cybersecurity & Networks",
          tags: ["Security", "Networking", "SOC", "Cloud Security"],
          why: [
            "Great if you enjoy puzzles, systems, and finding weaknesses.",
            "Clear certifications + pathways into entry roles.",
            "Good long-term salary upside."
          ]
        },
        {
          title: "Data & Analytics",
          tags: ["Data Analyst", "BI", "Data Eng", "Stats"],
          why: [
            "Fits if you like patterns, numbers, and evidence-based decisions.",
            "Useful across almost every industry.",
            "Pairs well with strong maths."
          ]
        }
      ],

      health: [
        {
          title: "Medicine",
          tags: ["Doctor", "Specialist", "Medical Research", "Public Health"],
          why: [
            "High impact if you want to help people at a deep level.",
            "Competitive entry (ATAR matters a lot).",
            "Long training, strong career stability."
          ]
        },
        {
          title: "Nursing",
          tags: ["Registered Nurse", "Emergency", "Aged Care", "Mental Health"],
          why: [
            "Hands-on people-focused work with many specialties.",
            "Clear pathways via uni/TAFE depending on role.",
            "Strong job demand."
          ]
        },
        {
          title: "Allied Health",
          tags: ["Physio", "OT", "Speech", "Dietitian"],
          why: [
            "Great if you like practical problem-solving + people care.",
            "Often good work-life balance options.",
            "Clear uni pathways."
          ]
        }
      ],

      animals: [
        {
          title: "Veterinary",
          tags: ["Veterinarian", "Vet Nurse", "Animal Hospital", "Surgery"],
          why: [
            "Best match if your interest is animals + science/biology.",
            "Vet is competitive (ATAR matters).",
            "Many paths: vet nurse (faster), vet (longer)."
          ]
        },
        {
          title: "Wildlife & Conservation",
          tags: ["Wildlife Carer", "Conservation", "Ranger", "Research"],
          why: [
            "Fits if you like animals + outdoors + protecting habitats.",
            "Often pairs with science/environment studies.",
            "Can start with volunteering to build experience."
          ]
        },
        {
          title: "Animal Care",
          tags: ["Trainer", "Groomer", "Shelter Work", "Pet Services"],
          why: [
            "Practical hands-on work with animals daily.",
            "Lower barrier to entry for many roles.",
            "Good for people who enjoy caring roles."
          ]
        }
      ],

      law: [
        {
          title: "Law",
          tags: ["Lawyer", "Paralegal", "Legal Aid", "Corporate"],
          why: [
            "Good match if you enjoy debating, reading, writing, and rules.",
            "Entry depends on ATAR and university choices.",
            "Strong progression once qualified."
          ]
        },
        {
          title: "Justice & Policing",
          tags: ["Police", "Detective", "Corrections", "Forensics"],
          why: [
            "Fits if you like structure + public service work.",
            "Physical + communication skills matter a lot.",
            "Clear training pipelines."
          ]
        },
        {
          title: "Policy & Government",
          tags: ["Policy", "Compliance", "Regulation", "Public Service"],
          why: [
            "Great if you like systems, fairness, and large-scale impact.",
            "Good career stability.",
            "Can combine with business/law."
          ]
        }
      ],

      engineering: [
        {
          title: "Engineering (Core)",
          tags: ["Civil", "Mechanical", "Electrical", "Mechatronics"],
          why: [
            "Strong match if you like maths + building how things work.",
            "ATAR matters for many uni engineering courses.",
            "Wide range of industries."
          ]
        },
        {
          title: "Software Engineering",
          tags: ["Systems", "Embedded", "Robotics", "IoT"],
          why: [
            "Great if you like tech + engineering mindset.",
            "Project-based learning helps a lot.",
            "High demand roles."
          ]
        },
        {
          title: "Project & Construction",
          tags: ["Site Eng", "Estimator", "Project Mgmt", "Safety"],
          why: [
            "Fits if you like coordination + real-world projects.",
            "Strong employment in infrastructure-heavy areas.",
            "Clear certifications/experience ladder."
          ]
        }
      ],

      creative: [
        {
          title: "UI/UX & Product",
          tags: ["UI/UX", "Product Design", "Research", "Prototyping"],
          why: [
            "Best match if you enjoy design + people + problem-solving.",
            "Portfolio matters more than grades for many roles.",
            "Pairs well with tech/product."
          ]
        },
        {
          title: "Media & Content",
          tags: ["Video", "Writing", "Social", "Editing"],
          why: [
            "Great if you like storytelling and making things people watch/read.",
            "Portfolio + consistency is key.",
            "Many freelance/creator paths."
          ]
        },
        {
          title: "Creative Tech",
          tags: ["Game Dev", "3D", "Animation", "Motion"],
          why: [
            "Perfect if you like art + computers together.",
            "Projects show skill quickly.",
            "Strong crossover with tech."
          ]
        }
      ],

      business: [
        {
          title: "Business & Management",
          tags: ["Management", "Ops", "Entrepreneurship", "HR"],
          why: [
            "Good if you like leading, organising, and improving systems.",
            "Can apply across almost any industry.",
            "Clear progression ladder."
          ]
        },
        {
          title: "Finance & Accounting",
          tags: ["Accounting", "Finance", "Banking", "Audit"],
          why: [
            "Strong if you like numbers + structure.",
            "Clear certifications and stable demand.",
            "Good salary progression."
          ]
        },
        {
          title: "Marketing & Sales",
          tags: ["Marketing", "Sales", "Brand", "Growth"],
          why: [
            "Great for communication + persuasion + creativity.",
            "Performance-based career paths exist.",
            "Works well with business ownership."
          ]
        }
      ],

      science: [
        {
          title: "Laboratory & Research",
          tags: ["Lab Tech", "Research", "Biology", "Chemistry"],
          why: [
            "Good match if you enjoy experiments and discovery.",
            "Often needs uni pathways.",
            "Can lead into medicine/pharma."
          ]
        },
        {
          title: "Environmental Science",
          tags: ["Climate", "Ecology", "Field Work", "Sustainability"],
          why: [
            "Great if you like nature + science + impact.",
            "Mix of field + analysis work.",
            "Growing importance globally."
          ]
        },
        {
          title: "Science + Tech",
          tags: ["Bioinformatics", "Data Science", "Medical Tech", "AI"],
          why: [
            "Perfect if you like science + computers.",
            "High-demand hybrid roles.",
            "Strong future-proofing."
          ]
        }
      ],

      education: [
        {
          title: "Teaching",
          tags: ["Primary", "Secondary", "VCE", "Special Ed"],
          why: [
            "Best if you enjoy helping others learn and improve.",
            "Communication + patience matters most.",
            "Stable career with clear qualification path."
          ]
        },
        {
          title: "Tutoring & Coaching",
          tags: ["Tutoring", "Coaching", "Mentoring", "Study Skills"],
          why: [
            "Great if you like explaining concepts clearly.",
            "Can start early and build experience.",
            "Flexible schedules."
          ]
        },
        {
          title: "Learning Design",
          tags: ["EdTech", "Course Design", "Training", "Content"],
          why: [
            "Good if you like teaching + building systems/materials.",
            "Strong crossover with tech/UX.",
            "Growing online learning space."
          ]
        }
      ],

      sports: [
        {
          title: "Fitness & Coaching",
          tags: ["Coach", "Personal Trainer", "Strength", "Sports Science"],
          why: [
            "Best match if you like training and helping people improve.",
            "Certifications + experience matter a lot.",
            "Can build your own business."
          ]
        },
        {
          title: "Physio & Rehab",
          tags: ["Physio", "Rehab", "Sports Injury", "Health"],
          why: [
            "Great if you like sport + caring for people.",
            "Uni pathways usually required.",
            "Strong demand."
          ]
        },
        {
          title: "Performance Pathways",
          tags: ["Elite Sport", "Analytics", "Nutrition", "Teams"],
          why: [
            "Fits if you like high performance environments.",
            "Competitive but rewarding.",
            "Build portfolio/experience early."
          ]
        }
      ],

      hospitality: [
        {
          title: "Hospitality",
          tags: ["Hotels", "Restaurants", "Events", "Customer Service"],
          why: [
            "Best if you like people + fast-paced environments.",
            "Easy entry and strong experience ladder.",
            "Good international opportunities."
          ]
        },
        {
          title: "Tourism",
          tags: ["Travel", "Tours", "Airlines", "Cruise"],
          why: [
            "Great if you like travel + planning experiences.",
            "People skills are key.",
            "Many seasonal options."
          ]
        },
        {
          title: "Events & Management",
          tags: ["Events", "Operations", "Venues", "Logistics"],
          why: [
            "Fits if you like organising big things.",
            "Strong project skills.",
            "Clear growth with experience."
          ]
        }
      ],

      trades: [
        {
          title: "Electrical",
          tags: ["Electrician", "Solar", "Automation", "Maintenance"],
          why: [
            "Strong if you like hands-on work and problem-solving.",
            "Great pay once qualified.",
            "Clear apprenticeship path."
          ]
        },
        {
          title: "Construction",
          tags: ["Carpentry", "Builder", "Site", "Plumbing"],
          why: [
            "Fits if you like building things and being active.",
            "Apprenticeships give you real experience early.",
            "Very practical career."
          ]
        },
        {
          title: "Trade + Tech",
          tags: ["HVAC", "Smart Homes", "Diagnostics", "Systems"],
          why: [
            "Great hybrid if you like tech but hands-on work.",
            "Good future demand.",
            "Strong growth."
          ]
        }
      ],

      transport: [
        {
          title: "Aviation",
          tags: ["Pilot", "Engineer", "Ground Ops", "ATC"],
          why: [
            "Best if you like travel, systems, and structured training.",
            "Some roles are competitive/expensive training.",
            "Strong long-term paths."
          ]
        },
        {
          title: "Logistics",
          tags: ["Supply Chain", "Warehouse", "Planning", "Dispatch"],
          why: [
            "Great if you like organising movement of goods.",
            "Huge industry with many entry points.",
            "Good career growth."
          ]
        },
        {
          title: "Transport Ops",
          tags: ["Driver", "Rail", "Fleet", "Maintenance"],
          why: [
            "Practical career with clear job pathways.",
            "Many roles value reliability + safety focus.",
            "Stable demand."
          ]
        }
      ]
    };

    // ---------- Helpers ----------
    const $ = (id) => document.getElementById(id);

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function salaryBoost(salary){
      // nudges match % (not the category)
      if(salary === "high") return 10;
      if(salary === "mid") return 5;
      return 2;
    }

    function atarBoost(score){
      // small boost for higher scores
      return clamp(Math.round((Number(score) - 50) / 10), -10, 15);
    }

    function baseMatch(i){
      // gentle descending base for top 3
      return [62, 55, 50][i] ?? 45;
    }

    // ---------- Dropdown rendering ----------
    function renderDropdownList(filterText=""){
      const list = $("ddList");
      list.innerHTML = "";
      const q = filterText.trim().toLowerCase();

      const filtered = INTERESTS.filter(x =>
        x.name.toLowerCase().includes(q) || x.sub.toLowerCase().includes(q)
      );

      (filtered.length ? filtered : INTERESTS).forEach(item => {
        const row = document.createElement("div");
        row.className = "dd-item";
        row.innerHTML = `
          <div class="dd-ico">${item.icon}</div>
          <div class="dd-main">
            <div class="dd-name">${item.name}</div>
            <div class="dd-sub">${item.sub}</div>
          </div>
        `;
        row.addEventListener("click", () => selectInterest(item));
        list.appendChild(row);
      });
    }

    function openDropdown(){
      $("dropdown").classList.add("open");
      renderDropdownList($("interestInput").value);
    }
    function closeDropdown(){
      $("dropdown").classList.remove("open");
    }

    function selectInterest(item){
      $("interestInput").value = item.name;
      $("interestValue").value = item.id;
      closeDropdown();
    }

    // ---------- Results ----------
    function buildResults(){
      const interestId = $("interestValue").value || guessInterest($("interestInput").value);
      const score = Number($("score").value || 0);
      const salary = $("salary").value;

      if(!interestId || !SHORTLIST_BY_INTEREST[interestId]){
        alert("Pick an interest from the dropdown (click the first box).");
        return;
      }

      const templates = SHORTLIST_BY_INTEREST[interestId];

      const b = salaryBoost(salary) + atarBoost(score);

      // Create 3 result cards with % that feels realistic
      const results = templates.map((t, i) => {
        const pct = clamp(baseMatch(i) + b - (i*3), 35, 99);
        return { ...t, pct };
      });

      renderResults(results);
    }

    function renderResults(items){
      const container = $("results");
      container.innerHTML = "";

      items.forEach((it, idx) => {
        const card = document.createElement("div");
        card.className = "result";
        card.innerHTML = `
          <div class="result-top">
            <div>
              <h3>${idx+1}. ${it.title}</h3>
            </div>
            <div class="match">${it.pct}% match</div>
          </div>
          <div class="chips">
            ${it.tags.map(t => `<span class="chip">${t}</span>`).join("")}
          </div>
          <div class="why">
            <div class="why-title">Why it fits:</div>
            <ul>
              ${it.why.map(x => `<li>${x}</li>`).join("")}
            </ul>
          </div>
        `;
        container.appendChild(card);
      });

      container.classList.remove("hidden");
      $("afterActions").classList.remove("hidden");

      window.scrollTo({ top: container.getBoundingClientRect().top + window.scrollY - 90, behavior:"smooth" });
    }

    // If user types something random, try to guess an interest.
    function guessInterest(text){
      const q = (text || "").toLowerCase();
      if(q.includes("tech") || q.includes("code") || q.includes("software") || q.includes("ai")) return "tech";
      if(q.includes("doctor") || q.includes("nurse") || q.includes("health") || q.includes("med")) return "health";
      if(q.includes("animal") || q.includes("vet") || q.includes("wildlife")) return "animals";
      if(q.includes("law") || q.includes("police") || q.includes("justice")) return "law";
      if(q.includes("engineer") || q.includes("mechanic") || q.includes("electrical")) return "engineering";
      if(q.includes("design") || q.includes("ui") || q.includes("ux") || q.includes("media")) return "creative";
      if(q.includes("business") || q.includes("finance") || q.includes("marketing")) return "business";
      if(q.includes("science") || q.includes("chem") || q.includes("bio")) return "science";
      if(q.includes("teach") || q.includes("tutor") || q.includes("education")) return "education";
      if(q.includes("sport") || q.includes("fitness") || q.includes("gym")) return "sports";
      if(q.includes("hotel") || q.includes("food") || q.includes("tour")) return "hospitality";
      if(q.includes("trade") || q.includes("electrician") || q.includes("plumb")) return "trades";
      if(q.includes("plane") || q.includes("logistics") || q.includes("transport")) return "transport";
      return "";
    }

    // ---------- Wire up events ----------
    $("interestInput").addEventListener("focus", openDropdown);
    $("interestInput").addEventListener("click", openDropdown);
    $("interestInput").addEventListener("input", () => {
      // user typing: open dropdown and filter
      $("interestValue").value = ""; // reset selected
      openDropdown();
    });

    // close dropdown when clicking outside
    document.addEventListener("click", (e) => {
      const bar = $("searchbar");
      if(!bar.contains(e.target)) closeDropdown();
    });

    // Enter key triggers search if dropdown closed
    $("interestInput").addEventListener("keydown", (e) => {
      if(e.key === "Enter"){
        e.preventDefault();
        closeDropdown();
        buildResults();
      }
      if(e.key === "Escape"){
        closeDropdown();
      }
    });

    $("searchBtn").addEventListener("click", buildResults);

    $("resetBtn").addEventListener("click", () => {
      $("interestInput").value = "";
      $("interestValue").value = "";
      $("score").value = 70;
      $("salary").value = "mid";
      $("results").classList.add("hidden");
      $("afterActions").classList.add("hidden");
      window.scrollTo({ top: 0, behavior:"smooth" });
    });

    // initial populate
    renderDropdownList("");
  </script>
</body>
</html>

